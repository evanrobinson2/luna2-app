2025-01-04 00:47:05,287 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 00:47:05,287 [DEBUG] __main__: Entering main_logic function...
2025-01-04 00:47:05,287 [DEBUG] src.luna_functions: director_login: homeserver_url=http://localhost:8008, username=director
2025-01-04 00:47:05,287 [DEBUG] src.luna_functions: Attempting to log in...
2025-01-04 00:47:05,570 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'user_id': '@director:localhost', 'access_token': 'syt_ZGlyZWN0b3I_LjAcZZxbnYgxxqfBChYm_3cmOpj', 'home_server': 'localhost', 'device_id': 'YWFOMDXLPH'}
2025-01-04 00:47:05,571 [DEBUG] src.luna_functions: Login response object: Logged in as @director:localhost, device id: YWFOMDXLPH.
2025-01-04 00:47:05,571 [INFO] src.luna_functions: Director logged in successfully.
2025-01-04 00:47:05,571 [DEBUG] __main__: Starting sync_forever loop. Waiting for new events...
2025-01-04 00:47:05,585 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's50_331_8_20_21_1_1_36_0_1', 'account_data': {'events': [{'type': 'm.push_rules', 'content': {'global': {'underride': [{'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.call.invite'}], 'actions': ['notify', {'set_tweak': 'sound', 'value': 'ring'}, {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.call', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.encrypted'}, {'kind': 'room_member_count', 'is': '2'}], 'actions': ['notify', {'set_tweak': 'sound', 'value': 'default'}, {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.encrypted_room_one_to_one', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.message'}, {'kind': 'room_member_count', 'is': '2'}], 'actions': ['notify', {'set_tweak': 'sound', 'value': 'default'}, {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.room_one_to_one', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.message'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.message', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.encrypted'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.encrypted', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'im.vector.modular.widgets'}, {'kind': 'event_match', 'key': 'content.type', 'pattern': 'jitsi'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': '*'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.im.vector.jitsi', 'default': True, 'enabled': True}], 'sender': [], 'room': [], 'content': [{'actions': ['notify', {'set_tweak': 'highlight'}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.contains_user_name', 'default': True, 'pattern': 'director', 'enabled': True}], 'override': [{'conditions': [], 'actions': [], 'rule_id': '.m.rule.master', 'default': True, 'enabled': False}, {'conditions': [{'kind': 'event_match', 'key': 'content.msgtype', 'pattern': 'm.notice'}], 'actions': [], 'rule_id': '.m.rule.suppress_notices', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.member'}, {'kind': 'event_match', 'key': 'content.membership', 'pattern': 'invite'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': '@director:localhost'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.invite_for_me', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.member'}], 'actions': [], 'rule_id': '.m.rule.member_event', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_property_contains', 'key': 'content.m\\.mentions.user_ids', 'value': '@director:localhost'}], 'actions': ['notify', {'set_tweak': 'highlight'}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.is_user_mention', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'contains_display_name'}], 'actions': ['notify', {'set_tweak': 'highlight'}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.contains_display_name', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_property_is', 'key': 'content.m\\.mentions.room', 'value': True}, {'kind': 'sender_notification_permission', 'key': 'room'}], 'actions': ['notify', {'set_tweak': 'highlight'}], 'rule_id': '.m.rule.is_room_mention', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'sender_notification_permission', 'key': 'room'}, {'kind': 'event_match', 'key': 'content.body', 'pattern': '@room'}], 'actions': ['notify', {'set_tweak': 'highlight'}], 'rule_id': '.m.rule.roomnotif', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.tombstone'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': ''}], 'actions': ['notify', {'set_tweak': 'highlight'}], 'rule_id': '.m.rule.tombstone', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.reaction'}], 'actions': [], 'rule_id': '.m.rule.reaction', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.server_acl'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': ''}], 'actions': [], 'rule_id': '.m.rule.room.server_acl', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_property_is', 'key': 'content.m\\.relates_to.rel_type', 'value': 'm.replace'}], 'actions': [], 'rule_id': '.m.rule.suppress_edits', 'default': True, 'enabled': True}]}}}]}, 'presence': {'events': [{'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'unavailable', 'last_active_ago': 46609}}, {'type': 'm.presence', 'sender': '@director:localhost', 'content': {'presence': 'online', 'last_active_ago': 9, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'join': {'!jqLnezkXSKwnRifFZu:localhost': {'timeline': {'events': [{'type': 'm.room.member', 'sender': '@director:localhost', 'content': {'displayname': 'director', 'membership': 'join'}, 'state_key': '@director:localhost', 'origin_server_ts': 1735962683824, 'unsigned': {'replaces_state': '$zrFOStMred3Fj3QC-a5jW2oG6aIfaV7f5FNtkpd6cq0', 'prev_content': {'is_direct': True, 'displayname': 'director', 'membership': 'invite'}, 'prev_sender': '@evan:localhost', 'membership': 'join', 'age': 6941758}, 'event_id': '$_RWGVfkRBwBZCRu_8x1wN0Oc0LydC-H2iGOKiQXL_nY'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735962683862, 'unsigned': {'membership': 'join', 'age': 6941720}, 'event_id': '$7pCcJtt42ld8ksb3QF_UsMVtn0FhdjRVjcCSx3FKNHA'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735963445453, 'unsigned': {'membership': 'join', 'age': 6180129}, 'event_id': '$C8a2ZpJGpL1WY2tVvrMW4OdXJ4b9HLQUU6-NLnWDL2E'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735963594905, 'unsigned': {'membership': 'join', 'age': 6030677}, 'event_id': '$24yLdVP4ZMZmMZWN11LW53wGWVnKaRGND3uBoPIcocE'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735963884566, 'unsigned': {'membership': 'join', 'age': 5741016}, 'event_id': '$1rctpqgDECJEV4AyGxSc-1Fq-Wjm1ogIRzGu-q0_KrM'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735964094560, 'unsigned': {'membership': 'join', 'age': 5531022}, 'event_id': '$ss7AuyM9bZHoV7PIfCQQm79IPjU-CbCu4vM-fHAPANY'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735964286643, 'unsigned': {'membership': 'join', 'age': 5338939}, 'event_id': '$vqZWVDB0Hh1bxB8rJw7ilIaqqHj8sYS5hTVqy25QooE'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735964311161, 'unsigned': {'membership': 'join', 'age': 5314421}, 'event_id': '$KzD0hpEohj7owNAAVtkGXqRy7pfSv20Q9aZitacEwxs'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735964362760, 'unsigned': {'membership': 'join', 'age': 5262822}, 'event_id': '$fanMwYiDaJYGeTbSA3lwujuVQo_tNv2PH-XbWv1zbGE'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735965207348, 'unsigned': {'membership': 'join', 'age': 4418234}, 'event_id': '$kYUdbdm9Q8F0R6rg0v9eDGXO7FmDitryWZeSLZErRNM'}], 'prev_batch': 's21_331_8_20_21_1_1_36_0_1', 'limited': True}, 'state': {'events': [{'type': 'm.room.create', 'sender': '@evan:localhost', 'content': {'room_version': '10', 'creator': '@evan:localhost'}, 'state_key': '', 'origin_server_ts': 1735961023822, 'unsigned': {'age': 8601760}, 'event_id': '$gNwrXvtctDUY-UvSt_3kSfWD80ieAlHLG25JkN0aGoQ'}, {'type': 'm.room.guest_access', 'sender': '@evan:localhost', 'content': {'guest_access': 'can_join'}, 'state_key': '', 'origin_server_ts': 1735961023863, 'unsigned': {'age': 8601719}, 'event_id': '$_H_dJEnBOa2F-6wYcAibZjb6ccYX0uptXhJTvFuKPLE'}, {'type': 'm.room.join_rules', 'sender': '@evan:localhost', 'content': {'join_rule': 'invite'}, 'state_key': '', 'origin_server_ts': 1735961023862, 'unsigned': {'age': 8601720}, 'event_id': '$S7vFxwSaTIIYoJMHNCJfmSlhu9OYSJ6fkOBjzpuxeMg'}, {'type': 'm.room.member', 'sender': '@evan:localhost', 'content': {'displayname': 'evan', 'membership': 'join'}, 'state_key': '@evan:localhost', 'origin_server_ts': 1735961023847, 'unsigned': {'age': 8601735}, 'event_id': '$v4SBfUMjRU4RTdh-OVvfUL57l0NYfRR8AecVE9wBQyU'}, {'type': 'm.room.history_visibility', 'sender': '@evan:localhost', 'content': {'history_visibility': 'shared'}, 'state_key': '', 'origin_server_ts': 1735961023863, 'unsigned': {'age': 8601719}, 'event_id': '$7quHRvYxDrNhEw0MTdkdYoRuQGre8X6DBXX1yl3D1Fs'}, {'type': 'm.room.power_levels', 'sender': '@evan:localhost', 'content': {'users': {'@evan:localhost': 100, '@director:localhost': 100}, 'users_default': 0, 'events': {'m.room.name': 50, 'm.room.avatar': 50, 'm.room.power_levels': 100, 'm.room.history_visibility': 100, 'm.room.canonical_alias': 50, 'm.room.tombstone': 100, 'm.room.server_acl': 100, 'm.room.encryption': 100, 'org.matrix.msc3401.call.member': 0, 'org.matrix.msc3401.call': 100}, 'events_default': 0, 'state_default': 50, 'ban': 50, 'kick': 50, 'redact': 50, 'invite': 0, 'historical': 100}, 'state_key': '', 'origin_server_ts': 1735961023856, 'unsigned': {'age': 8601726}, 'event_id': '$ZAbLg379boqmPpm8qFu4qdoSyfAWdlqYDtPjzZHjbuo'}]}, 'account_data': {'events': []}, 'ephemeral': {'events': [{'type': 'm.receipt', 'content': {'$fanMwYiDaJYGeTbSA3lwujuVQo_tNv2PH-XbWv1zbGE': {'m.read': {'@evan:localhost': {'ts': 1735964381911, 'thread_id': 'main'}}}}}]}, 'unread_notifications': {'notification_count': 0, 'highlight_count': 0}, 'summary': {}}, '!ycPwYaTaAbSpLcHdMt:localhost': {'timeline': {'events': [{'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735965704146, 'unsigned': {'membership': 'join', 'age': 3921436}, 'event_id': '$3GSLmbAIXweiqH0GARIqN9-GXwp40L5W2veKr2YM9ys'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Hello' (auto-respond)."}, 'origin_server_ts': 1735965829553, 'unsigned': {'membership': 'join', 'age': 3796029}, 'event_id': '$xe191oxzlnvOS2IsYNzxRu2RnVK7kIzzJtF_5Y73GWs'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'hello' (auto-respond)."}, 'origin_server_ts': 1735965829564, 'unsigned': {'membership': 'join', 'age': 3796018}, 'event_id': '$js7_ZDY16lwzF6wpuGE2gfty9DodnpbKfaKEVOWOPW8'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735965829574, 'unsigned': {'membership': 'join', 'age': 3796008}, 'event_id': '$3J5yw_uFtmI5kQ7gDopNNNTIIDoeEeDODkrD0eEZTuo'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'hello' (auto-respond)."}, 'origin_server_ts': 1735966187733, 'unsigned': {'membership': 'join', 'age': 3437849}, 'event_id': '$SJboT4H2qTjJrwz24NfGNMXaKVSFjVhf3e72CeY1_-0'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735966187754, 'unsigned': {'membership': 'join', 'age': 3437828}, 'event_id': '$RdoaReWjyXBZe2HYJelTArG6nwE1SrHWKIp7noadmfw'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'hello' (auto-respond)."}, 'origin_server_ts': 1735966300762, 'unsigned': {'membership': 'join', 'age': 3324820}, 'event_id': '$yAdZVDyDxZzHseNAkSL5ltyIHb8cXFFmFHyCwk2BfZ8'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735966300774, 'unsigned': {'membership': 'join', 'age': 3324808}, 'event_id': '$5NkaeYkihHjqofvzuy-r95pY2JEmdDWOHwnBe0a3oeU'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735967880893, 'unsigned': {'membership': 'join', 'age': 1744689}, 'event_id': '$5OCVp9J50G5BLuqX-_F4vSkbyQotGgc42aXvB4lQGYQ'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735967937444, 'unsigned': {'membership': 'join', 'age': 1688138}, 'event_id': '$YygDfPwNHA2hFLI-za6MzpUeGHFt33uEKxFywdmuROM'}], 'prev_batch': 's40_331_8_20_21_1_1_36_0_1', 'limited': True}, 'state': {'events': [{'type': 'm.room.history_visibility', 'sender': '@evan:localhost', 'content': {'history_visibility': 'shared'}, 'state_key': '', 'origin_server_ts': 1735958683344, 'unsigned': {'age': 10942238}, 'event_id': '$uhr2ubGtbYr4aJX7Ae6SNKhjmUcixROPjf8O3VN9YXI'}, {'type': 'm.room.guest_access', 'sender': '@evan:localhost', 'content': {'guest_access': 'can_join'}, 'state_key': '', 'origin_server_ts': 1735958683344, 'unsigned': {'age': 10942238}, 'event_id': '$HdaoJxokij4uI9rkv3H5s4LyJTIrk363mLoJ3TUBfN0'}, {'type': 'm.room.member', 'sender': '@director:localhost', 'content': {'displayname': 'director', 'membership': 'join'}, 'state_key': '@director:localhost', 'origin_server_ts': 1735964447159, 'unsigned': {'replaces_state': '$YCk4i8n3bE3A8m0LDVo-IGQ6UNc0su37KTjlz0FcFDA', 'prev_content': {'displayname': 'director', 'membership': 'invite'}, 'prev_sender': '@evan:localhost', 'age': 5178423}, 'event_id': '$ze9ApOG8rSsqv1P6vYlLCOr00IyF0sdkP8GLpbxM1U0'}, {'type': 'm.room.power_levels', 'sender': '@evan:localhost', 'content': {'users': {'@evan:localhost': 100}, 'users_default': 0, 'events': {'m.room.name': 50, 'm.room.avatar': 50, 'm.room.power_levels': 100, 'm.room.history_visibility': 100, 'm.room.canonical_alias': 50, 'm.room.tombstone': 100, 'm.room.server_acl': 100, 'm.room.encryption': 100, 'org.matrix.msc3401.call.member': 0, 'org.matrix.msc3401.call': 100}, 'events_default': 0, 'state_default': 50, 'ban': 50, 'kick': 50, 'redact': 50, 'invite': 0, 'historical': 100}, 'state_key': '', 'origin_server_ts': 1735958683337, 'unsigned': {'age': 10942245}, 'event_id': '$Wxq1Tg74YoIoFW1bBCy4vvOMrpev09rRqY_fAZO6omg'}, {'type': 'm.room.name', 'sender': '@evan:localhost', 'content': {'name': 'MyFirstChannel'}, 'state_key': '', 'origin_server_ts': 1735958683345, 'unsigned': {'age': 10942237}, 'event_id': '$lnXrf-3jERhg_faW3BoJT_IWEM_yLkTmcaPgN-0ksyc'}, {'type': 'm.room.member', 'sender': '@evan:localhost', 'content': {'displayname': 'evan', 'membership': 'join'}, 'state_key': '@evan:localhost', 'origin_server_ts': 1735958683324, 'unsigned': {'age': 10942258}, 'event_id': '$jnOhRmoE7eXSccLHDWxqfFAc7f-2bDMezRMfq4ZqbEo'}, {'type': 'm.room.create', 'sender': '@evan:localhost', 'content': {'room_version': '10', 'creator': '@evan:localhost'}, 'state_key': '', 'origin_server_ts': 1735958683291, 'unsigned': {'age': 10942291}, 'event_id': '$rgDKGRS2U6T0z84an_RoGvjjzmFlzEy3jbvJTuEcvD0'}, {'type': 'm.room.topic', 'sender': '@evan:localhost', 'content': {'topic': 'For the winners'}, 'state_key': '', 'origin_server_ts': 1735958683345, 'unsigned': {'age': 10942237}, 'event_id': '$M4h-LcezFLlEHaw_6-eqHtR2fwBiwHqI6WdhyVuTPIo'}, {'type': 'm.room.join_rules', 'sender': '@evan:localhost', 'content': {'join_rule': 'invite'}, 'state_key': '', 'origin_server_ts': 1735958683344, 'unsigned': {'age': 10942238}, 'event_id': '$cukaDWkSW9mo1Yb-QS1UWvajqaen5eBuW4vZIDpUpDY'}]}, 'account_data': {'events': []}, 'ephemeral': {'events': [{'type': 'm.receipt', 'content': {'$YygDfPwNHA2hFLI-za6MzpUeGHFt33uEKxFywdmuROM': {'m.read': {'@evan:localhost': {'ts': 1735968198294, 'thread_id': 'main'}}}}}]}, 'unread_notifications': {'notification_count': 4, 'highlight_count': 0}, 'summary': {}}}}}
2025-01-04 00:47:05,590 [INFO] nio.client.base_client: New joined room !jqLnezkXSKwnRifFZu:localhost
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomCreateEvent
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomGuestAccessEvent
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomJoinRulesEvent
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomHistoryVisibilityEvent
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type PowerLevelsEvent
2025-01-04 00:47:05,590 [INFO] nio.rooms: Changing power level for user @evan:localhost from 0 to 100
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,590 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,590 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,590 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,590 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,590 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,590 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,590 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,590 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,590 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,590 [INFO] nio.client.base_client: New joined room !ycPwYaTaAbSpLcHdMt:localhost
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomHistoryVisibilityEvent
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomGuestAccessEvent
2025-01-04 00:47:05,590 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type PowerLevelsEvent
2025-01-04 00:47:05,591 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomNameEvent
2025-01-04 00:47:05,591 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomCreateEvent
2025-01-04 00:47:05,591 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomTopicEvent
2025-01-04 00:47:05,591 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomJoinRulesEvent
2025-01-04 00:47:05,591 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,591 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,591 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,591 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,591 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,591 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,591 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,591 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,591 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,591 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,591 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,591 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,591 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,591 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,591 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,591 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,591 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,591 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:05,591 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:47:05,591 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:47:08,600 [DEBUG] src.console_functions: Raw input is: ['clear']
2025-01-04 00:47:08,609 [INFO] src.console_functions: Console screen cleared.
2025-01-04 00:47:13,275 [DEBUG] src.console_functions: Raw input is: ['help']
2025-01-04 00:47:13,276 [INFO] src.console_functions: Displayed help to the console user.
2025-01-04 00:47:15,112 [DEBUG] src.console_functions: Raw input is: ['who']
2025-01-04 00:47:35,601 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's50_331_8_20_21_1_1_36_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-04 00:48:05,614 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's50_333_8_20_21_1_1_36_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'unavailable', 'last_active_ago': 106636}}, {'type': 'm.presence', 'sender': '@director:localhost', 'content': {'presence': 'online', 'last_active_ago': 30005, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-04 00:48:35,631 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's50_333_8_20_21_1_1_36_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-04 00:49:05,639 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's50_333_8_20_21_1_1_36_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-04 00:49:05,644 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's50_335_8_20_21_1_1_36_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'unavailable', 'last_active_ago': 166669}}, {'type': 'm.presence', 'sender': '@director:localhost', 'content': {'presence': 'online', 'last_active_ago': 1, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-04 00:49:35,655 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's50_335_8_20_21_1_1_36_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-04 00:49:49,298 [INFO] __main__: Shutting down Director via KeyboardInterrupt.
2025-01-04 00:49:49,299 [DEBUG] __main__: Caught KeyboardInterrupt; exiting now.
2025-01-04 00:49:50,295 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 00:49:50,295 [DEBUG] __main__: Entering main_logic function...
2025-01-04 00:49:50,295 [DEBUG] src.luna_functions: director_login: homeserver_url=http://localhost:8008, username=director
2025-01-04 00:49:50,295 [DEBUG] src.luna_functions: Attempting to log in...
2025-01-04 00:49:50,813 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'errcode': 'M_LIMIT_EXCEEDED', 'error': 'Too Many Requests', 'retry_after_ms': 90295}
2025-01-04 00:49:50,814 [WARNING] nio.responses: Error validating response: 'user_id' is a required property
2025-01-04 00:49:50,814 [WARNING] nio.client.async_client: Got 429 response (ratelimited), sleeping for 90295ms
2025-01-04 00:50:36,464 [INFO] __main__: Shutting down Director via KeyboardInterrupt.
2025-01-04 00:50:36,465 [DEBUG] __main__: Caught KeyboardInterrupt; exiting now.
2025-01-04 00:50:36,484 [ERROR] asyncio: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x10408f620>
2025-01-04 00:50:46,213 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 00:50:46,213 [DEBUG] __main__: Entering main_logic function...
2025-01-04 00:50:46,213 [DEBUG] src.luna_functions: director_login: homeserver_url=http://localhost:8008, username=director
2025-01-04 00:50:46,213 [DEBUG] src.luna_functions: Attempting to log in...
2025-01-04 00:50:46,740 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'errcode': 'M_LIMIT_EXCEEDED', 'error': 'Too Many Requests', 'retry_after_ms': 34373}
2025-01-04 00:50:46,741 [WARNING] nio.responses: Error validating response: 'user_id' is a required property
2025-01-04 00:50:46,741 [WARNING] nio.client.async_client: Got 429 response (ratelimited), sleeping for 34373ms
2025-01-04 00:51:06,285 [DEBUG] src.console_functions: Raw input is: ['who']
2025-01-04 00:51:21,410 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'user_id': '@director:localhost', 'access_token': 'syt_ZGlyZWN0b3I_zIEtOVZdknHMMitvZFPm_1dkFg2', 'home_server': 'localhost', 'device_id': 'EUNDEAEUIT'}
2025-01-04 00:51:21,411 [DEBUG] src.luna_functions: Login response object: Logged in as @director:localhost, device id: EUNDEAEUIT.
2025-01-04 00:51:21,411 [INFO] src.luna_functions: Director logged in successfully.
2025-01-04 00:51:21,412 [DEBUG] __main__: Starting sync_forever loop. Waiting for new events...
2025-01-04 00:51:21,428 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's50_341_8_20_21_1_1_37_0_1', 'account_data': {'events': [{'type': 'm.push_rules', 'content': {'global': {'underride': [{'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.call.invite'}], 'actions': ['notify', {'set_tweak': 'sound', 'value': 'ring'}, {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.call', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.encrypted'}, {'kind': 'room_member_count', 'is': '2'}], 'actions': ['notify', {'set_tweak': 'sound', 'value': 'default'}, {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.encrypted_room_one_to_one', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.message'}, {'kind': 'room_member_count', 'is': '2'}], 'actions': ['notify', {'set_tweak': 'sound', 'value': 'default'}, {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.room_one_to_one', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.message'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.message', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.encrypted'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.encrypted', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'im.vector.modular.widgets'}, {'kind': 'event_match', 'key': 'content.type', 'pattern': 'jitsi'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': '*'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.im.vector.jitsi', 'default': True, 'enabled': True}], 'sender': [], 'room': [], 'content': [{'actions': ['notify', {'set_tweak': 'highlight'}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.contains_user_name', 'default': True, 'pattern': 'director', 'enabled': True}], 'override': [{'conditions': [], 'actions': [], 'rule_id': '.m.rule.master', 'default': True, 'enabled': False}, {'conditions': [{'kind': 'event_match', 'key': 'content.msgtype', 'pattern': 'm.notice'}], 'actions': [], 'rule_id': '.m.rule.suppress_notices', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.member'}, {'kind': 'event_match', 'key': 'content.membership', 'pattern': 'invite'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': '@director:localhost'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.invite_for_me', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.member'}], 'actions': [], 'rule_id': '.m.rule.member_event', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_property_contains', 'key': 'content.m\\.mentions.user_ids', 'value': '@director:localhost'}], 'actions': ['notify', {'set_tweak': 'highlight'}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.is_user_mention', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'contains_display_name'}], 'actions': ['notify', {'set_tweak': 'highlight'}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.contains_display_name', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_property_is', 'key': 'content.m\\.mentions.room', 'value': True}, {'kind': 'sender_notification_permission', 'key': 'room'}], 'actions': ['notify', {'set_tweak': 'highlight'}], 'rule_id': '.m.rule.is_room_mention', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'sender_notification_permission', 'key': 'room'}, {'kind': 'event_match', 'key': 'content.body', 'pattern': '@room'}], 'actions': ['notify', {'set_tweak': 'highlight'}], 'rule_id': '.m.rule.roomnotif', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.tombstone'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': ''}], 'actions': ['notify', {'set_tweak': 'highlight'}], 'rule_id': '.m.rule.tombstone', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.reaction'}], 'actions': [], 'rule_id': '.m.rule.reaction', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.server_acl'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': ''}], 'actions': [], 'rule_id': '.m.rule.room.server_acl', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_property_is', 'key': 'content.m\\.relates_to.rel_type', 'value': 'm.replace'}], 'actions': [], 'rule_id': '.m.rule.suppress_edits', 'default': True, 'enabled': True}]}}}]}, 'presence': {'events': [{'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'online', 'last_active_ago': 6, 'currently_active': True}}, {'type': 'm.presence', 'sender': '@director:localhost', 'content': {'presence': 'online', 'last_active_ago': 11, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'join': {'!jqLnezkXSKwnRifFZu:localhost': {'timeline': {'events': [{'type': 'm.room.member', 'sender': '@director:localhost', 'content': {'displayname': 'director', 'membership': 'join'}, 'state_key': '@director:localhost', 'origin_server_ts': 1735962683824, 'unsigned': {'replaces_state': '$zrFOStMred3Fj3QC-a5jW2oG6aIfaV7f5FNtkpd6cq0', 'prev_content': {'is_direct': True, 'displayname': 'director', 'membership': 'invite'}, 'prev_sender': '@evan:localhost', 'membership': 'join', 'age': 7197601}, 'event_id': '$_RWGVfkRBwBZCRu_8x1wN0Oc0LydC-H2iGOKiQXL_nY'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735962683862, 'unsigned': {'membership': 'join', 'age': 7197563}, 'event_id': '$7pCcJtt42ld8ksb3QF_UsMVtn0FhdjRVjcCSx3FKNHA'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735963445453, 'unsigned': {'membership': 'join', 'age': 6435972}, 'event_id': '$C8a2ZpJGpL1WY2tVvrMW4OdXJ4b9HLQUU6-NLnWDL2E'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735963594905, 'unsigned': {'membership': 'join', 'age': 6286520}, 'event_id': '$24yLdVP4ZMZmMZWN11LW53wGWVnKaRGND3uBoPIcocE'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735963884566, 'unsigned': {'membership': 'join', 'age': 5996859}, 'event_id': '$1rctpqgDECJEV4AyGxSc-1Fq-Wjm1ogIRzGu-q0_KrM'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735964094560, 'unsigned': {'membership': 'join', 'age': 5786865}, 'event_id': '$ss7AuyM9bZHoV7PIfCQQm79IPjU-CbCu4vM-fHAPANY'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735964286643, 'unsigned': {'membership': 'join', 'age': 5594782}, 'event_id': '$vqZWVDB0Hh1bxB8rJw7ilIaqqHj8sYS5hTVqy25QooE'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735964311161, 'unsigned': {'membership': 'join', 'age': 5570264}, 'event_id': '$KzD0hpEohj7owNAAVtkGXqRy7pfSv20Q9aZitacEwxs'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735964362760, 'unsigned': {'membership': 'join', 'age': 5518665}, 'event_id': '$fanMwYiDaJYGeTbSA3lwujuVQo_tNv2PH-XbWv1zbGE'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735965207348, 'unsigned': {'membership': 'join', 'age': 4674077}, 'event_id': '$kYUdbdm9Q8F0R6rg0v9eDGXO7FmDitryWZeSLZErRNM'}], 'prev_batch': 's21_341_8_20_21_1_1_37_0_1', 'limited': True}, 'state': {'events': [{'type': 'm.room.create', 'sender': '@evan:localhost', 'content': {'room_version': '10', 'creator': '@evan:localhost'}, 'state_key': '', 'origin_server_ts': 1735961023822, 'unsigned': {'age': 8857603}, 'event_id': '$gNwrXvtctDUY-UvSt_3kSfWD80ieAlHLG25JkN0aGoQ'}, {'type': 'm.room.guest_access', 'sender': '@evan:localhost', 'content': {'guest_access': 'can_join'}, 'state_key': '', 'origin_server_ts': 1735961023863, 'unsigned': {'age': 8857562}, 'event_id': '$_H_dJEnBOa2F-6wYcAibZjb6ccYX0uptXhJTvFuKPLE'}, {'type': 'm.room.join_rules', 'sender': '@evan:localhost', 'content': {'join_rule': 'invite'}, 'state_key': '', 'origin_server_ts': 1735961023862, 'unsigned': {'age': 8857563}, 'event_id': '$S7vFxwSaTIIYoJMHNCJfmSlhu9OYSJ6fkOBjzpuxeMg'}, {'type': 'm.room.member', 'sender': '@evan:localhost', 'content': {'displayname': 'evan', 'membership': 'join'}, 'state_key': '@evan:localhost', 'origin_server_ts': 1735961023847, 'unsigned': {'age': 8857578}, 'event_id': '$v4SBfUMjRU4RTdh-OVvfUL57l0NYfRR8AecVE9wBQyU'}, {'type': 'm.room.history_visibility', 'sender': '@evan:localhost', 'content': {'history_visibility': 'shared'}, 'state_key': '', 'origin_server_ts': 1735961023863, 'unsigned': {'age': 8857562}, 'event_id': '$7quHRvYxDrNhEw0MTdkdYoRuQGre8X6DBXX1yl3D1Fs'}, {'type': 'm.room.power_levels', 'sender': '@evan:localhost', 'content': {'users': {'@evan:localhost': 100, '@director:localhost': 100}, 'users_default': 0, 'events': {'m.room.name': 50, 'm.room.avatar': 50, 'm.room.power_levels': 100, 'm.room.history_visibility': 100, 'm.room.canonical_alias': 50, 'm.room.tombstone': 100, 'm.room.server_acl': 100, 'm.room.encryption': 100, 'org.matrix.msc3401.call.member': 0, 'org.matrix.msc3401.call': 100}, 'events_default': 0, 'state_default': 50, 'ban': 50, 'kick': 50, 'redact': 50, 'invite': 0, 'historical': 100}, 'state_key': '', 'origin_server_ts': 1735961023856, 'unsigned': {'age': 8857569}, 'event_id': '$ZAbLg379boqmPpm8qFu4qdoSyfAWdlqYDtPjzZHjbuo'}]}, 'account_data': {'events': []}, 'ephemeral': {'events': [{'type': 'm.receipt', 'content': {'$fanMwYiDaJYGeTbSA3lwujuVQo_tNv2PH-XbWv1zbGE': {'m.read': {'@evan:localhost': {'ts': 1735964381911, 'thread_id': 'main'}}}}}]}, 'unread_notifications': {'notification_count': 0, 'highlight_count': 0}, 'summary': {}}, '!ycPwYaTaAbSpLcHdMt:localhost': {'timeline': {'events': [{'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735965704146, 'unsigned': {'membership': 'join', 'age': 4177279}, 'event_id': '$3GSLmbAIXweiqH0GARIqN9-GXwp40L5W2veKr2YM9ys'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Hello' (auto-respond)."}, 'origin_server_ts': 1735965829553, 'unsigned': {'membership': 'join', 'age': 4051872}, 'event_id': '$xe191oxzlnvOS2IsYNzxRu2RnVK7kIzzJtF_5Y73GWs'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'hello' (auto-respond)."}, 'origin_server_ts': 1735965829564, 'unsigned': {'membership': 'join', 'age': 4051861}, 'event_id': '$js7_ZDY16lwzF6wpuGE2gfty9DodnpbKfaKEVOWOPW8'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735965829574, 'unsigned': {'membership': 'join', 'age': 4051851}, 'event_id': '$3J5yw_uFtmI5kQ7gDopNNNTIIDoeEeDODkrD0eEZTuo'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'hello' (auto-respond)."}, 'origin_server_ts': 1735966187733, 'unsigned': {'membership': 'join', 'age': 3693692}, 'event_id': '$SJboT4H2qTjJrwz24NfGNMXaKVSFjVhf3e72CeY1_-0'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735966187754, 'unsigned': {'membership': 'join', 'age': 3693671}, 'event_id': '$RdoaReWjyXBZe2HYJelTArG6nwE1SrHWKIp7noadmfw'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'hello' (auto-respond)."}, 'origin_server_ts': 1735966300762, 'unsigned': {'membership': 'join', 'age': 3580663}, 'event_id': '$yAdZVDyDxZzHseNAkSL5ltyIHb8cXFFmFHyCwk2BfZ8'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735966300774, 'unsigned': {'membership': 'join', 'age': 3580651}, 'event_id': '$5NkaeYkihHjqofvzuy-r95pY2JEmdDWOHwnBe0a3oeU'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735967880893, 'unsigned': {'membership': 'join', 'age': 2000532}, 'event_id': '$5OCVp9J50G5BLuqX-_F4vSkbyQotGgc42aXvB4lQGYQ'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735967937444, 'unsigned': {'membership': 'join', 'age': 1943981}, 'event_id': '$YygDfPwNHA2hFLI-za6MzpUeGHFt33uEKxFywdmuROM'}], 'prev_batch': 's40_341_8_20_21_1_1_37_0_1', 'limited': True}, 'state': {'events': [{'type': 'm.room.history_visibility', 'sender': '@evan:localhost', 'content': {'history_visibility': 'shared'}, 'state_key': '', 'origin_server_ts': 1735958683344, 'unsigned': {'age': 11198081}, 'event_id': '$uhr2ubGtbYr4aJX7Ae6SNKhjmUcixROPjf8O3VN9YXI'}, {'type': 'm.room.guest_access', 'sender': '@evan:localhost', 'content': {'guest_access': 'can_join'}, 'state_key': '', 'origin_server_ts': 1735958683344, 'unsigned': {'age': 11198081}, 'event_id': '$HdaoJxokij4uI9rkv3H5s4LyJTIrk363mLoJ3TUBfN0'}, {'type': 'm.room.member', 'sender': '@director:localhost', 'content': {'displayname': 'director', 'membership': 'join'}, 'state_key': '@director:localhost', 'origin_server_ts': 1735964447159, 'unsigned': {'replaces_state': '$YCk4i8n3bE3A8m0LDVo-IGQ6UNc0su37KTjlz0FcFDA', 'prev_content': {'displayname': 'director', 'membership': 'invite'}, 'prev_sender': '@evan:localhost', 'age': 5434266}, 'event_id': '$ze9ApOG8rSsqv1P6vYlLCOr00IyF0sdkP8GLpbxM1U0'}, {'type': 'm.room.power_levels', 'sender': '@evan:localhost', 'content': {'users': {'@evan:localhost': 100}, 'users_default': 0, 'events': {'m.room.name': 50, 'm.room.avatar': 50, 'm.room.power_levels': 100, 'm.room.history_visibility': 100, 'm.room.canonical_alias': 50, 'm.room.tombstone': 100, 'm.room.server_acl': 100, 'm.room.encryption': 100, 'org.matrix.msc3401.call.member': 0, 'org.matrix.msc3401.call': 100}, 'events_default': 0, 'state_default': 50, 'ban': 50, 'kick': 50, 'redact': 50, 'invite': 0, 'historical': 100}, 'state_key': '', 'origin_server_ts': 1735958683337, 'unsigned': {'age': 11198088}, 'event_id': '$Wxq1Tg74YoIoFW1bBCy4vvOMrpev09rRqY_fAZO6omg'}, {'type': 'm.room.name', 'sender': '@evan:localhost', 'content': {'name': 'MyFirstChannel'}, 'state_key': '', 'origin_server_ts': 1735958683345, 'unsigned': {'age': 11198080}, 'event_id': '$lnXrf-3jERhg_faW3BoJT_IWEM_yLkTmcaPgN-0ksyc'}, {'type': 'm.room.member', 'sender': '@evan:localhost', 'content': {'displayname': 'evan', 'membership': 'join'}, 'state_key': '@evan:localhost', 'origin_server_ts': 1735958683324, 'unsigned': {'age': 11198101}, 'event_id': '$jnOhRmoE7eXSccLHDWxqfFAc7f-2bDMezRMfq4ZqbEo'}, {'type': 'm.room.create', 'sender': '@evan:localhost', 'content': {'room_version': '10', 'creator': '@evan:localhost'}, 'state_key': '', 'origin_server_ts': 1735958683291, 'unsigned': {'age': 11198134}, 'event_id': '$rgDKGRS2U6T0z84an_RoGvjjzmFlzEy3jbvJTuEcvD0'}, {'type': 'm.room.topic', 'sender': '@evan:localhost', 'content': {'topic': 'For the winners'}, 'state_key': '', 'origin_server_ts': 1735958683345, 'unsigned': {'age': 11198080}, 'event_id': '$M4h-LcezFLlEHaw_6-eqHtR2fwBiwHqI6WdhyVuTPIo'}, {'type': 'm.room.join_rules', 'sender': '@evan:localhost', 'content': {'join_rule': 'invite'}, 'state_key': '', 'origin_server_ts': 1735958683344, 'unsigned': {'age': 11198081}, 'event_id': '$cukaDWkSW9mo1Yb-QS1UWvajqaen5eBuW4vZIDpUpDY'}]}, 'account_data': {'events': []}, 'ephemeral': {'events': [{'type': 'm.receipt', 'content': {'$YygDfPwNHA2hFLI-za6MzpUeGHFt33uEKxFywdmuROM': {'m.read': {'@evan:localhost': {'ts': 1735968198294, 'thread_id': 'main'}}}}}]}, 'unread_notifications': {'notification_count': 4, 'highlight_count': 0}, 'summary': {}}}}}
2025-01-04 00:51:21,436 [INFO] nio.client.base_client: New joined room !jqLnezkXSKwnRifFZu:localhost
2025-01-04 00:51:21,436 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomCreateEvent
2025-01-04 00:51:21,436 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomGuestAccessEvent
2025-01-04 00:51:21,436 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomJoinRulesEvent
2025-01-04 00:51:21,436 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomHistoryVisibilityEvent
2025-01-04 00:51:21,436 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type PowerLevelsEvent
2025-01-04 00:51:21,436 [INFO] nio.rooms: Changing power level for user @evan:localhost from 0 to 100
2025-01-04 00:51:21,436 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,436 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,436 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,436 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,436 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,436 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,436 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,436 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,436 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,437 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,437 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,437 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,437 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,437 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,437 [INFO] nio.client.base_client: New joined room !ycPwYaTaAbSpLcHdMt:localhost
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomHistoryVisibilityEvent
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomGuestAccessEvent
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type PowerLevelsEvent
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomNameEvent
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomCreateEvent
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomTopicEvent
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomJoinRulesEvent
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,437 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,437 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,437 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,437 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,437 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,437 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,437 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,437 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,437 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:21,437 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 00:51:21,437 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-04 00:51:46,219 [DEBUG] src.console_functions: Raw input is: ['clear']
2025-01-04 00:51:46,252 [INFO] src.console_functions: Console screen cleared.
2025-01-04 00:51:47,651 [DEBUG] src.console_functions: Raw input is: ['help']
2025-01-04 00:51:47,651 [INFO] src.console_functions: Displayed help to the console user.
2025-01-04 00:51:51,459 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's50_341_8_20_21_1_1_37_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-04 00:52:21,510 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's50_343_8_20_21_1_1_37_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'online', 'last_active_ago': 30000, 'currently_active': True}}, {'type': 'm.presence', 'sender': '@director:localhost', 'content': {'presence': 'online', 'last_active_ago': 30012, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-04 00:52:34,375 [INFO] __main__: Shutting down Director via KeyboardInterrupt.
2025-01-04 00:52:34,376 [DEBUG] __main__: Caught KeyboardInterrupt; exiting now.
2025-01-04 00:52:36,988 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 00:52:36,989 [DEBUG] __main__: Entering main_logic function...
2025-01-04 00:52:36,989 [DEBUG] src.luna_functions: director_login: homeserver_url=http://localhost:8008, username=director
2025-01-04 00:52:36,989 [DEBUG] src.luna_functions: Attempting to log in...
2025-01-04 00:52:37,510 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'errcode': 'M_LIMIT_EXCEEDED', 'error': 'Too Many Requests', 'retry_after_ms': 256931}
2025-01-04 00:52:37,511 [WARNING] nio.responses: Error validating response: 'user_id' is a required property
2025-01-04 00:52:37,511 [WARNING] nio.client.async_client: Got 429 response (ratelimited), sleeping for 256931ms
2025-01-04 00:52:41,315 [DEBUG] src.console_functions: Raw input is: ['help']
2025-01-04 00:52:41,315 [INFO] src.console_functions: Displayed help to the console user.
2025-01-04 00:52:45,322 [DEBUG] src.console_functions: Raw input is: ['who']
2025-01-04 00:53:07,512 [INFO] __main__: Shutting down Director via KeyboardInterrupt.
2025-01-04 00:53:07,512 [DEBUG] __main__: Caught KeyboardInterrupt; exiting now.
2025-01-04 00:53:07,528 [ERROR] asyncio: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x102ebb620>
2025-01-04 00:53:08,998 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 00:53:08,999 [DEBUG] __main__: Entering main_logic function...
2025-01-04 00:53:08,999 [DEBUG] src.luna_functions: director_login: homeserver_url=http://localhost:8008, username=director
2025-01-04 00:53:08,999 [DEBUG] src.luna_functions: Attempting to log in...
2025-01-04 00:53:09,509 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'errcode': 'M_LIMIT_EXCEEDED', 'error': 'Too Many Requests', 'retry_after_ms': 224927}
2025-01-04 00:53:09,509 [WARNING] nio.responses: Error validating response: 'user_id' is a required property
2025-01-04 00:53:09,510 [WARNING] nio.client.async_client: Got 429 response (ratelimited), sleeping for 224927ms
2025-01-04 00:56:26,366 [INFO] __main__: Shutting down Director via KeyboardInterrupt.
2025-01-04 00:56:26,367 [DEBUG] __main__: Caught KeyboardInterrupt; exiting now.
2025-01-04 00:56:26,382 [ERROR] asyncio: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x11035f620>
2025-01-04 01:17:25,656 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 01:17:25,657 [DEBUG] __main__: Entering main_logic function...
2025-01-04 01:18:39,962 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 01:18:39,963 [DEBUG] __main__: Entering main_logic function...
2025-01-04 01:19:04,926 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 01:19:04,926 [DEBUG] __main__: Entering main_logic function...
2025-01-04 01:19:16,385 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 01:19:16,385 [DEBUG] __main__: Entering main_logic function...
2025-01-04 01:19:54,287 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 01:19:54,287 [DEBUG] __main__: Entering main_logic function...
2025-01-04 01:20:44,837 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 01:20:44,837 [DEBUG] __main__: Entering main_logic function...
2025-01-04 01:21:10,690 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 01:21:10,691 [DEBUG] __main__: Entering main_logic function...
2025-01-04 01:21:20,244 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 01:21:20,244 [DEBUG] __main__: Entering main_logic function...
2025-01-04 01:21:28,829 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 01:21:28,830 [DEBUG] __main__: Entering main_logic function...
2025-01-04 01:23:14,148 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 01:23:14,148 [DEBUG] __main__: Entering main_logic function...
2025-01-04 01:23:14,475 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'user_id': '@director:localhost', 'access_token': 'syt_ZGlyZWN0b3I_XQycgxnVLUPrZAWFndZW_2273wZ', 'home_server': 'localhost', 'device_id': 'DirectorDevice'}
2025-01-04 01:23:14,498 [ERROR] asyncio: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x104dc7620>
2025-01-04 01:23:14,498 [ERROR] asyncio: Unclosed connector
connections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x104f8dd30>, 551922.047933208)])']
connector: <aiohttp.connector.TCPConnector object at 0x104dc7770>
2025-01-04 01:23:25,618 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 01:23:25,618 [DEBUG] __main__: Entering main_logic function...
2025-01-04 01:23:25,891 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'user_id': '@director:localhost', 'access_token': 'syt_ZGlyZWN0b3I_VAWUTSjJfnZGPiAESkym_02WVjF', 'home_server': 'localhost', 'device_id': 'DirectorDevice'}
2025-01-04 01:23:25,910 [ERROR] asyncio: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x11278f620>
2025-01-04 01:23:25,911 [ERROR] asyncio: Unclosed connector
connections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x113251d30>, 551933.463908875)])']
connector: <aiohttp.connector.TCPConnector object at 0x11278f770>
2025-01-04 01:23:56,712 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 01:23:56,713 [DEBUG] __main__: Entering main_logic function...
2025-01-04 01:23:56,991 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'user_id': '@director:localhost', 'access_token': 'syt_ZGlyZWN0b3I_FlJfIWVuyCtVByJTlroo_2JgzDa', 'home_server': 'localhost', 'device_id': 'DirectorDevice'}
2025-01-04 01:23:57,021 [ERROR] asyncio: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x10528f620>
2025-01-04 01:23:57,021 [ERROR] asyncio: Unclosed connector
connections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x105455d30>, 551964.562698291)])']
connector: <aiohttp.connector.TCPConnector object at 0x10528f770>
2025-01-04 01:27:44,948 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-04 01:27:44,948 [DEBUG] __main__: Entering main_logic function...
2025-01-04 01:27:45,229 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'user_id': '@director:localhost', 'access_token': 'syt_ZGlyZWN0b3I_bYVsvTHZOUHSSlFRCBSZ_33Sj1F', 'home_server': 'localhost', 'device_id': 'KFBUBDDALL'}
2025-01-04 01:27:45,230 [INFO] __main__: Director logged in successfully.
2025-01-04 01:27:45,230 [DEBUG] __main__: Starting sync_forever loop. Waiting for new events...
2025-01-04 01:27:45,284 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's50_385_0_20_21_1_1_39_0_1', 'account_data': {'events': [{'type': 'm.push_rules', 'content': {'global': {'underride': [{'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.call.invite'}], 'actions': ['notify', {'set_tweak': 'sound', 'value': 'ring'}, {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.call', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.encrypted'}, {'kind': 'room_member_count', 'is': '2'}], 'actions': ['notify', {'set_tweak': 'sound', 'value': 'default'}, {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.encrypted_room_one_to_one', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.message'}, {'kind': 'room_member_count', 'is': '2'}], 'actions': ['notify', {'set_tweak': 'sound', 'value': 'default'}, {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.room_one_to_one', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.message'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.message', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.encrypted'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.encrypted', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'im.vector.modular.widgets'}, {'kind': 'event_match', 'key': 'content.type', 'pattern': 'jitsi'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': '*'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.im.vector.jitsi', 'default': True, 'enabled': True}], 'sender': [], 'room': [], 'content': [{'actions': ['notify', {'set_tweak': 'highlight'}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.contains_user_name', 'default': True, 'pattern': 'director', 'enabled': True}], 'override': [{'conditions': [], 'actions': [], 'rule_id': '.m.rule.master', 'default': True, 'enabled': False}, {'conditions': [{'kind': 'event_match', 'key': 'content.msgtype', 'pattern': 'm.notice'}], 'actions': [], 'rule_id': '.m.rule.suppress_notices', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.member'}, {'kind': 'event_match', 'key': 'content.membership', 'pattern': 'invite'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': '@director:localhost'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.invite_for_me', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.member'}], 'actions': [], 'rule_id': '.m.rule.member_event', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_property_contains', 'key': 'content.m\\.mentions.user_ids', 'value': '@director:localhost'}], 'actions': ['notify', {'set_tweak': 'highlight'}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.is_user_mention', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'contains_display_name'}], 'actions': ['notify', {'set_tweak': 'highlight'}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.contains_display_name', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_property_is', 'key': 'content.m\\.mentions.room', 'value': True}, {'kind': 'sender_notification_permission', 'key': 'room'}], 'actions': ['notify', {'set_tweak': 'highlight'}], 'rule_id': '.m.rule.is_room_mention', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'sender_notification_permission', 'key': 'room'}, {'kind': 'event_match', 'key': 'content.body', 'pattern': '@room'}], 'actions': ['notify', {'set_tweak': 'highlight'}], 'rule_id': '.m.rule.roomnotif', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.tombstone'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': ''}], 'actions': ['notify', {'set_tweak': 'highlight'}], 'rule_id': '.m.rule.tombstone', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.reaction'}], 'actions': [], 'rule_id': '.m.rule.reaction', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.server_acl'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': ''}], 'actions': [], 'rule_id': '.m.rule.room.server_acl', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_property_is', 'key': 'content.m\\.relates_to.rel_type', 'value': 'm.replace'}], 'actions': [], 'rule_id': '.m.rule.suppress_edits', 'default': True, 'enabled': True}]}}}]}, 'presence': {'events': [{'type': 'm.presence', 'sender': '@director:localhost', 'content': {'presence': 'online', 'last_active_ago': 50, 'currently_active': True}}, {'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'unavailable', 'last_active_ago': 21639}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'join': {'!jqLnezkXSKwnRifFZu:localhost': {'timeline': {'events': [{'type': 'm.room.member', 'sender': '@director:localhost', 'content': {'displayname': 'director', 'membership': 'join'}, 'state_key': '@director:localhost', 'origin_server_ts': 1735962683824, 'unsigned': {'replaces_state': '$zrFOStMred3Fj3QC-a5jW2oG6aIfaV7f5FNtkpd6cq0', 'prev_content': {'is_direct': True, 'displayname': 'director', 'membership': 'invite'}, 'prev_sender': '@evan:localhost', 'membership': 'join', 'age': 9381458}, 'event_id': '$_RWGVfkRBwBZCRu_8x1wN0Oc0LydC-H2iGOKiQXL_nY'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735962683862, 'unsigned': {'membership': 'join', 'age': 9381420}, 'event_id': '$7pCcJtt42ld8ksb3QF_UsMVtn0FhdjRVjcCSx3FKNHA'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735963445453, 'unsigned': {'membership': 'join', 'age': 8619829}, 'event_id': '$C8a2ZpJGpL1WY2tVvrMW4OdXJ4b9HLQUU6-NLnWDL2E'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735963594905, 'unsigned': {'membership': 'join', 'age': 8470377}, 'event_id': '$24yLdVP4ZMZmMZWN11LW53wGWVnKaRGND3uBoPIcocE'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735963884566, 'unsigned': {'membership': 'join', 'age': 8180716}, 'event_id': '$1rctpqgDECJEV4AyGxSc-1Fq-Wjm1ogIRzGu-q0_KrM'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735964094560, 'unsigned': {'membership': 'join', 'age': 7970722}, 'event_id': '$ss7AuyM9bZHoV7PIfCQQm79IPjU-CbCu4vM-fHAPANY'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735964286643, 'unsigned': {'membership': 'join', 'age': 7778639}, 'event_id': '$vqZWVDB0Hh1bxB8rJw7ilIaqqHj8sYS5hTVqy25QooE'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735964311161, 'unsigned': {'membership': 'join', 'age': 7754121}, 'event_id': '$KzD0hpEohj7owNAAVtkGXqRy7pfSv20Q9aZitacEwxs'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735964362760, 'unsigned': {'membership': 'join', 'age': 7702522}, 'event_id': '$fanMwYiDaJYGeTbSA3lwujuVQo_tNv2PH-XbWv1zbGE'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Welcome.' (auto-respond)."}, 'origin_server_ts': 1735965207348, 'unsigned': {'membership': 'join', 'age': 6857934}, 'event_id': '$kYUdbdm9Q8F0R6rg0v9eDGXO7FmDitryWZeSLZErRNM'}], 'prev_batch': 's21_384_0_20_21_1_1_39_0_1', 'limited': True}, 'state': {'events': [{'type': 'm.room.join_rules', 'sender': '@evan:localhost', 'content': {'join_rule': 'invite'}, 'state_key': '', 'origin_server_ts': 1735961023862, 'unsigned': {'age': 11041420}, 'event_id': '$S7vFxwSaTIIYoJMHNCJfmSlhu9OYSJ6fkOBjzpuxeMg'}, {'type': 'm.room.power_levels', 'sender': '@evan:localhost', 'content': {'users': {'@evan:localhost': 100, '@director:localhost': 100}, 'users_default': 0, 'events': {'m.room.name': 50, 'm.room.avatar': 50, 'm.room.power_levels': 100, 'm.room.history_visibility': 100, 'm.room.canonical_alias': 50, 'm.room.tombstone': 100, 'm.room.server_acl': 100, 'm.room.encryption': 100, 'org.matrix.msc3401.call.member': 0, 'org.matrix.msc3401.call': 100}, 'events_default': 0, 'state_default': 50, 'ban': 50, 'kick': 50, 'redact': 50, 'invite': 0, 'historical': 100}, 'state_key': '', 'origin_server_ts': 1735961023856, 'unsigned': {'age': 11041426}, 'event_id': '$ZAbLg379boqmPpm8qFu4qdoSyfAWdlqYDtPjzZHjbuo'}, {'type': 'm.room.guest_access', 'sender': '@evan:localhost', 'content': {'guest_access': 'can_join'}, 'state_key': '', 'origin_server_ts': 1735961023863, 'unsigned': {'age': 11041419}, 'event_id': '$_H_dJEnBOa2F-6wYcAibZjb6ccYX0uptXhJTvFuKPLE'}, {'type': 'm.room.create', 'sender': '@evan:localhost', 'content': {'room_version': '10', 'creator': '@evan:localhost'}, 'state_key': '', 'origin_server_ts': 1735961023822, 'unsigned': {'age': 11041460}, 'event_id': '$gNwrXvtctDUY-UvSt_3kSfWD80ieAlHLG25JkN0aGoQ'}, {'type': 'm.room.member', 'sender': '@evan:localhost', 'content': {'displayname': 'evan', 'membership': 'join'}, 'state_key': '@evan:localhost', 'origin_server_ts': 1735961023847, 'unsigned': {'age': 11041435}, 'event_id': '$v4SBfUMjRU4RTdh-OVvfUL57l0NYfRR8AecVE9wBQyU'}, {'type': 'm.room.history_visibility', 'sender': '@evan:localhost', 'content': {'history_visibility': 'shared'}, 'state_key': '', 'origin_server_ts': 1735961023863, 'unsigned': {'age': 11041419}, 'event_id': '$7quHRvYxDrNhEw0MTdkdYoRuQGre8X6DBXX1yl3D1Fs'}]}, 'account_data': {'events': []}, 'ephemeral': {'events': [{'type': 'm.receipt', 'content': {'$fanMwYiDaJYGeTbSA3lwujuVQo_tNv2PH-XbWv1zbGE': {'m.read': {'@evan:localhost': {'ts': 1735964381911, 'thread_id': 'main'}}}}}]}, 'unread_notifications': {'notification_count': 0, 'highlight_count': 0}, 'summary': {}}, '!ycPwYaTaAbSpLcHdMt:localhost': {'timeline': {'events': [{'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735965704146, 'unsigned': {'membership': 'join', 'age': 6361136}, 'event_id': '$3GSLmbAIXweiqH0GARIqN9-GXwp40L5W2veKr2YM9ys'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'Hello' (auto-respond)."}, 'origin_server_ts': 1735965829553, 'unsigned': {'membership': 'join', 'age': 6235729}, 'event_id': '$xe191oxzlnvOS2IsYNzxRu2RnVK7kIzzJtF_5Y73GWs'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'hello' (auto-respond)."}, 'origin_server_ts': 1735965829564, 'unsigned': {'membership': 'join', 'age': 6235718}, 'event_id': '$js7_ZDY16lwzF6wpuGE2gfty9DodnpbKfaKEVOWOPW8'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735965829574, 'unsigned': {'membership': 'join', 'age': 6235708}, 'event_id': '$3J5yw_uFtmI5kQ7gDopNNNTIIDoeEeDODkrD0eEZTuo'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'hello' (auto-respond)."}, 'origin_server_ts': 1735966187733, 'unsigned': {'membership': 'join', 'age': 5877549}, 'event_id': '$SJboT4H2qTjJrwz24NfGNMXaKVSFjVhf3e72CeY1_-0'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735966187754, 'unsigned': {'membership': 'join', 'age': 5877528}, 'event_id': '$RdoaReWjyXBZe2HYJelTArG6nwE1SrHWKIp7noadmfw'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'hello' (auto-respond)."}, 'origin_server_ts': 1735966300762, 'unsigned': {'membership': 'join', 'age': 5764520}, 'event_id': '$yAdZVDyDxZzHseNAkSL5ltyIHb8cXFFmFHyCwk2BfZ8'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735966300774, 'unsigned': {'membership': 'join', 'age': 5764508}, 'event_id': '$5NkaeYkihHjqofvzuy-r95pY2JEmdDWOHwnBe0a3oeU'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735967880893, 'unsigned': {'membership': 'join', 'age': 4184389}, 'event_id': '$5OCVp9J50G5BLuqX-_F4vSkbyQotGgc42aXvB4lQGYQ'}, {'type': 'm.room.message', 'sender': '@director:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'sly devil!' (auto-respond)."}, 'origin_server_ts': 1735967937444, 'unsigned': {'membership': 'join', 'age': 4127838}, 'event_id': '$YygDfPwNHA2hFLI-za6MzpUeGHFt33uEKxFywdmuROM'}], 'prev_batch': 's40_384_0_20_21_1_1_39_0_1', 'limited': True}, 'state': {'events': [{'type': 'm.room.member', 'sender': '@evan:localhost', 'content': {'displayname': 'evan', 'membership': 'join'}, 'state_key': '@evan:localhost', 'origin_server_ts': 1735958683324, 'unsigned': {'age': 13381958}, 'event_id': '$jnOhRmoE7eXSccLHDWxqfFAc7f-2bDMezRMfq4ZqbEo'}, {'type': 'm.room.join_rules', 'sender': '@evan:localhost', 'content': {'join_rule': 'invite'}, 'state_key': '', 'origin_server_ts': 1735958683344, 'unsigned': {'age': 13381938}, 'event_id': '$cukaDWkSW9mo1Yb-QS1UWvajqaen5eBuW4vZIDpUpDY'}, {'type': 'm.room.power_levels', 'sender': '@evan:localhost', 'content': {'users': {'@evan:localhost': 100}, 'users_default': 0, 'events': {'m.room.name': 50, 'm.room.avatar': 50, 'm.room.power_levels': 100, 'm.room.history_visibility': 100, 'm.room.canonical_alias': 50, 'm.room.tombstone': 100, 'm.room.server_acl': 100, 'm.room.encryption': 100, 'org.matrix.msc3401.call.member': 0, 'org.matrix.msc3401.call': 100}, 'events_default': 0, 'state_default': 50, 'ban': 50, 'kick': 50, 'redact': 50, 'invite': 0, 'historical': 100}, 'state_key': '', 'origin_server_ts': 1735958683337, 'unsigned': {'age': 13381945}, 'event_id': '$Wxq1Tg74YoIoFW1bBCy4vvOMrpev09rRqY_fAZO6omg'}, {'type': 'm.room.create', 'sender': '@evan:localhost', 'content': {'room_version': '10', 'creator': '@evan:localhost'}, 'state_key': '', 'origin_server_ts': 1735958683291, 'unsigned': {'age': 13381991}, 'event_id': '$rgDKGRS2U6T0z84an_RoGvjjzmFlzEy3jbvJTuEcvD0'}, {'type': 'm.room.history_visibility', 'sender': '@evan:localhost', 'content': {'history_visibility': 'shared'}, 'state_key': '', 'origin_server_ts': 1735958683344, 'unsigned': {'age': 13381938}, 'event_id': '$uhr2ubGtbYr4aJX7Ae6SNKhjmUcixROPjf8O3VN9YXI'}, {'type': 'm.room.member', 'sender': '@director:localhost', 'content': {'displayname': 'director', 'membership': 'join'}, 'state_key': '@director:localhost', 'origin_server_ts': 1735964447159, 'unsigned': {'replaces_state': '$YCk4i8n3bE3A8m0LDVo-IGQ6UNc0su37KTjlz0FcFDA', 'prev_content': {'displayname': 'director', 'membership': 'invite'}, 'prev_sender': '@evan:localhost', 'age': 7618123}, 'event_id': '$ze9ApOG8rSsqv1P6vYlLCOr00IyF0sdkP8GLpbxM1U0'}, {'type': 'm.room.name', 'sender': '@evan:localhost', 'content': {'name': 'MyFirstChannel'}, 'state_key': '', 'origin_server_ts': 1735958683345, 'unsigned': {'age': 13381937}, 'event_id': '$lnXrf-3jERhg_faW3BoJT_IWEM_yLkTmcaPgN-0ksyc'}, {'type': 'm.room.topic', 'sender': '@evan:localhost', 'content': {'topic': 'For the winners'}, 'state_key': '', 'origin_server_ts': 1735958683345, 'unsigned': {'age': 13381937}, 'event_id': '$M4h-LcezFLlEHaw_6-eqHtR2fwBiwHqI6WdhyVuTPIo'}, {'type': 'm.room.guest_access', 'sender': '@evan:localhost', 'content': {'guest_access': 'can_join'}, 'state_key': '', 'origin_server_ts': 1735958683344, 'unsigned': {'age': 13381938}, 'event_id': '$HdaoJxokij4uI9rkv3H5s4LyJTIrk363mLoJ3TUBfN0'}]}, 'account_data': {'events': []}, 'ephemeral': {'events': [{'type': 'm.receipt', 'content': {'$YygDfPwNHA2hFLI-za6MzpUeGHFt33uEKxFywdmuROM': {'m.read': {'@evan:localhost': {'ts': 1735968198294, 'thread_id': 'main'}}}}}]}, 'unread_notifications': {'notification_count': 4, 'highlight_count': 0}, 'summary': {}}}}}
2025-01-04 01:27:45,291 [INFO] nio.client.base_client: New joined room !jqLnezkXSKwnRifFZu:localhost
2025-01-04 01:27:45,291 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomJoinRulesEvent
2025-01-04 01:27:45,291 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type PowerLevelsEvent
2025-01-04 01:27:45,291 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomGuestAccessEvent
2025-01-04 01:27:45,291 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomCreateEvent
2025-01-04 01:27:45,291 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomHistoryVisibilityEvent
2025-01-04 01:27:45,291 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,291 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,291 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,291 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,291 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,292 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,292 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,292 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,292 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,292 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,292 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,292 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,292 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,292 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,292 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,292 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,292 [INFO] nio.rooms: Room !jqLnezkXSKwnRifFZu:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,292 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,292 [INFO] nio.client.base_client: New joined room !ycPwYaTaAbSpLcHdMt:localhost
2025-01-04 01:27:45,292 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomJoinRulesEvent
2025-01-04 01:27:45,292 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type PowerLevelsEvent
2025-01-04 01:27:45,292 [INFO] nio.rooms: Changing power level for user @evan:localhost from 0 to 100
2025-01-04 01:27:45,292 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomCreateEvent
2025-01-04 01:27:45,292 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomHistoryVisibilityEvent
2025-01-04 01:27:45,292 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomNameEvent
2025-01-04 01:27:45,292 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomTopicEvent
2025-01-04 01:27:45,292 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomGuestAccessEvent
2025-01-04 01:27:45,292 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,292 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,292 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,292 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,293 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,293 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,293 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,293 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,293 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,293 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,293 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,293 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,293 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,293 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,293 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,293 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,293 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,293 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:27:45,293 [INFO] nio.rooms: Room !ycPwYaTaAbSpLcHdMt:localhost handling event of type RoomMessageText
2025-01-04 01:27:45,293 [WARNING] src.luna_functions: No DIRECTOR_CLIENT set. Cannot respond.
2025-01-04 01:28:03,305 [DEBUG] src.console_functions: Raw input is: ['help']
2025-01-04 01:28:03,305 [INFO] src.console_functions: Displayed help to the console user.
2025-01-04 01:28:15,304 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's50_387_0_20_21_1_1_39_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'unavailable', 'last_active_ago': 51656}}, {'type': 'm.presence', 'sender': '@director:localhost', 'content': {'presence': 'online', 'last_active_ago': 30005, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-04 01:28:15,321 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's50_388_0_20_21_1_1_39_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'online', 'last_active_ago': 10, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-04 01:28:16,057 [DEBUG] src.console_functions: Raw input is: ['exit']
2025-01-04 01:28:16,058 [INFO] src.console_functions: Console received 'exit' command. Exiting process.
2025-01-04 01:28:25,311 [INFO] __main__: Shutting down Director via KeyboardInterrupt.
2025-01-04 01:28:25,312 [DEBUG] __main__: Caught KeyboardInterrupt; exiting now.
2025-01-04 01:28:25,342 [ERROR] asyncio: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x10788f620>
