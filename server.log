2025-01-05 00:42:08,939 [ERROR] asyncio: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x103a62120>
2025-01-05 00:42:18,368 [DEBUG] __main__: Added file handler to root logger. Logging to 'server.log' at DEBUG level.
2025-01-05 00:42:18,368 [DEBUG] __main__: Exiting configure_logging function.
2025-01-05 00:42:18,368 [DEBUG] __main__: Logging configuration complete.
2025-01-05 00:42:18,368 [DEBUG] __main__: Creating a new asyncio event loop.
2025-01-05 00:42:18,368 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-05 00:42:18,368 [DEBUG] __main__: Set this new loop as the default event loop for the current thread.
2025-01-05 00:42:18,368 [DEBUG] __main__: Stored reference to the new loop in MAIN_LOOP.
2025-01-05 00:42:18,368 [DEBUG] __main__: Entering start_console_thread function.
2025-01-05 00:42:18,369 [INFO] __main__: Console thread started successfully.
2025-01-05 00:42:18,369 [DEBUG] __main__: Exiting start_console_thread function.
2025-01-05 00:42:18,369 [DEBUG] __main__: Console thread has been initiated. Returning to main thread.
2025-01-05 00:42:18,369 [INFO] __main__: Starting main_logic coroutine.
2025-01-05 00:42:18,369 [DEBUG] __main__: Entering main_logic function...
2025-01-05 00:42:18,369 [DEBUG] __main__: Creating AsyncClient with homeserver='http://localhost:8008' and user='@director:localhost'.
2025-01-05 00:42:18,369 [DEBUG] __main__: Attempting to log in the Director with password='12345' and device_name='LunaDirector'.
2025-01-05 00:42:18,887 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'errcode': 'M_LIMIT_EXCEEDED', 'error': 'Too Many Requests', 'retry_after_ms': 155245}
2025-01-05 00:42:18,888 [WARNING] nio.responses: Error validating response: 'user_id' is a required property
2025-01-05 00:42:18,888 [WARNING] nio.client.async_client: Got 429 response (ratelimited), sleeping for 155245ms
2025-01-05 00:44:54,149 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'errcode': 'M_FORBIDDEN', 'error': 'Invalid username or password'}
2025-01-05 00:44:54,150 [WARNING] nio.responses: Error validating response: 'user_id' is a required property
2025-01-05 00:44:54,150 [ERROR] __main__: Failed to log in: LoginError: M_FORBIDDEN Invalid username or password
2025-01-05 00:44:54,150 [DEBUG] __main__: Exiting main_logic due to login failure.
2025-01-05 00:44:54,150 [DEBUG] __main__: Preparing to close the event loop.
2025-01-05 00:44:54,150 [INFO] __main__: Event loop closed. Exiting main function.
2025-01-05 00:44:54,164 [ERROR] asyncio: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x102d72120>
2025-01-05 00:44:54,164 [ERROR] asyncio: Unclosed connector
connections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x102f9a630>, 579910.268936833)])']
connector: <aiohttp.connector.TCPConnector object at 0x102d72270>
2025-01-05 00:48:01,837 [DEBUG] __main__: Added file handler to root logger. Logging to 'server.log' at DEBUG level.
2025-01-05 00:48:01,837 [DEBUG] __main__: Exiting configure_logging function.
2025-01-05 00:48:01,837 [DEBUG] __main__: Logging configuration complete.
2025-01-05 00:48:01,837 [DEBUG] __main__: Creating a new asyncio event loop.
2025-01-05 00:48:01,838 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-05 00:48:01,838 [DEBUG] __main__: Set this new loop as the default event loop for the current thread.
2025-01-05 00:48:01,838 [DEBUG] __main__: Stored reference to the new loop in MAIN_LOOP.
2025-01-05 00:48:01,838 [DEBUG] __main__: Entering start_console_thread function.
2025-01-05 00:48:01,838 [INFO] __main__: Console thread started successfully.
2025-01-05 00:48:01,838 [DEBUG] __main__: Exiting start_console_thread function.
2025-01-05 00:48:01,838 [DEBUG] __main__: Console thread has been initiated. Returning to main thread.
2025-01-05 00:48:01,838 [INFO] __main__: Starting main_logic coroutine.
2025-01-05 00:48:01,838 [DEBUG] __main__: Entering main_logic function...
2025-01-05 00:48:01,838 [DEBUG] __main__: Creating AsyncClient with homeserver='http://localhost:8008' and user='@luna:localhost'.
2025-01-05 00:48:01,838 [DEBUG] __main__: Attempting to log in the Luna with password='12345' and device_name='LunaDirector'.
2025-01-05 00:48:02,363 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'errcode': 'M_LIMIT_EXCEEDED', 'error': 'Too Many Requests', 'retry_after_ms': 145098}
2025-01-05 00:48:02,364 [WARNING] nio.responses: Error validating response: 'user_id' is a required property
2025-01-05 00:48:02,364 [WARNING] nio.client.async_client: Got 429 response (ratelimited), sleeping for 145098ms
2025-01-05 00:50:27,763 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'user_id': '@luna:localhost', 'access_token': 'syt_bHVuYQ_vUjtXxXEbWwUwREJlFZR_3Qqv4v', 'home_server': 'localhost', 'device_id': 'XDXXYVNSHQ'}
2025-01-05 00:50:27,765 [INFO] __main__: Director logged in successfully.
2025-01-05 00:50:27,765 [DEBUG] __main__: Storing reference to DIRECTOR_CLIENT in src.luna_functions.
2025-01-05 00:50:27,766 [DEBUG] __main__: Registering event callbacks for RoomMessageText and InviteMemberEvent.
2025-01-05 00:50:27,766 [DEBUG] __main__: Callbacks registered successfully.
2025-01-05 00:50:27,766 [DEBUG] __main__: Starting sync_forever loop. Awaiting new events with timeout=30000.
2025-01-05 00:50:27,766 [DEBUG] __main__: sync_forever has exited (this is unexpected in normal operation).
2025-01-05 00:50:27,766 [DEBUG] __main__: Preparing to close the event loop.
2025-01-05 00:50:27,766 [INFO] __main__: Event loop closed. Exiting main function.
2025-01-05 00:50:27,796 [ERROR] asyncio: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x107242120>
2025-01-05 00:50:48,870 [DEBUG] __main__: Added file handler to root logger. Logging to 'server.log' at DEBUG level.
2025-01-05 00:50:48,870 [DEBUG] __main__: Exiting configure_logging function.
2025-01-05 00:50:48,870 [DEBUG] __main__: Logging configuration complete.
2025-01-05 00:50:48,870 [DEBUG] __main__: Creating a new asyncio event loop.
2025-01-05 00:50:48,870 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-05 00:50:48,870 [DEBUG] __main__: Set this new loop as the default event loop for the current thread.
2025-01-05 00:50:48,871 [DEBUG] __main__: Stored reference to the new loop in MAIN_LOOP.
2025-01-05 00:50:48,871 [DEBUG] __main__: Entering start_console_thread function.
2025-01-05 00:50:48,871 [INFO] __main__: Console thread started successfully.
2025-01-05 00:50:48,871 [DEBUG] __main__: Exiting start_console_thread function.
2025-01-05 00:50:48,871 [DEBUG] __main__: Console thread has been initiated. Returning to main thread.
2025-01-05 00:50:48,871 [INFO] __main__: Starting main_logic coroutine.
2025-01-05 00:50:48,871 [DEBUG] __main__: Entering main_logic function...
2025-01-05 00:50:48,871 [DEBUG] __main__: Creating AsyncClient with homeserver='http://localhost:8008' and user='@luna:localhost'.
2025-01-05 00:50:48,871 [DEBUG] __main__: Attempting to log in the Luna with password='12345' and device_name='LunaDirector'.
2025-01-05 00:50:49,383 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'errcode': 'M_LIMIT_EXCEEDED', 'error': 'Too Many Requests', 'retry_after_ms': 311409}
2025-01-05 00:50:49,383 [WARNING] nio.responses: Error validating response: 'user_id' is a required property
2025-01-05 00:50:49,383 [WARNING] nio.client.async_client: Got 429 response (ratelimited), sleeping for 311409ms
2025-01-05 00:56:01,083 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'user_id': '@luna:localhost', 'access_token': 'syt_bHVuYQ_qHaHoZZEbLoYVYskbrMs_0qVgi1', 'home_server': 'localhost', 'device_id': 'MAZCYKVFAG'}
2025-01-05 00:56:01,084 [INFO] __main__: Director logged in successfully.
2025-01-05 00:56:01,084 [DEBUG] __main__: Storing reference to DIRECTOR_CLIENT in src.luna_functions.
2025-01-05 00:56:01,084 [DEBUG] __main__: Registering event callbacks for RoomMessageText and InviteMemberEvent.
2025-01-05 00:56:01,084 [DEBUG] __main__: Callbacks registered successfully.
2025-01-05 00:56:01,084 [DEBUG] __main__: Starting sync_forever loop. Awaiting new events with timeout=30000.
2025-01-05 00:56:01,084 [DEBUG] __main__: sync_forever has exited (this is unexpected in normal operation).
2025-01-05 00:56:01,084 [DEBUG] __main__: Preparing to close the event loop.
2025-01-05 00:56:01,084 [INFO] __main__: Event loop closed. Exiting main function.
2025-01-05 00:56:01,105 [ERROR] asyncio: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x105372120>
2025-01-05 00:59:58,444 [DEBUG] __main__: Added file handler to root logger. Logging to 'server.log' at DEBUG level.
2025-01-05 00:59:58,444 [DEBUG] __main__: Exiting configure_logging function.
2025-01-05 00:59:58,444 [DEBUG] __main__: Logging configuration complete.
2025-01-05 00:59:58,444 [DEBUG] __main__: Creating a new asyncio event loop.
2025-01-05 00:59:58,444 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-05 00:59:58,444 [DEBUG] __main__: Set this new loop as the default event loop for the current thread.
2025-01-05 00:59:58,444 [DEBUG] __main__: Stored reference to the new loop in MAIN_LOOP.
2025-01-05 00:59:58,444 [DEBUG] __main__: Entering start_console_thread function.
2025-01-05 00:59:58,444 [INFO] __main__: Console thread started successfully.
2025-01-05 00:59:58,444 [DEBUG] __main__: Exiting start_console_thread function.
2025-01-05 00:59:58,444 [DEBUG] __main__: Console thread has been initiated. Returning to main thread.
2025-01-05 00:59:58,444 [INFO] __main__: Starting main_logic coroutine.
2025-01-05 00:59:58,444 [DEBUG] __main__: Entering main_logic function...
2025-01-05 00:59:58,444 [DEBUG] __main__: Creating AsyncClient with homeserver='http://localhost:8008' and user='@luna:localhost'.
2025-01-05 00:59:58,444 [DEBUG] __main__: Attempting to log in the Luna with password='12345' and device_name='LunaDirector'.
2025-01-05 00:59:58,981 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'errcode': 'M_LIMIT_EXCEEDED', 'error': 'Too Many Requests', 'retry_after_ms': 95168}
2025-01-05 00:59:58,981 [WARNING] nio.responses: Error validating response: 'user_id' is a required property
2025-01-05 00:59:58,981 [WARNING] nio.client.async_client: Got 429 response (ratelimited), sleeping for 95168ms
2025-01-05 01:01:34,423 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'user_id': '@luna:localhost', 'access_token': 'syt_bHVuYQ_bKQrmCaVOPnuJvpxWMRn_3UEBWa', 'home_server': 'localhost', 'device_id': 'MFBGYPURZL'}
2025-01-05 01:01:34,423 [INFO] __main__: Director logged in successfully.
2025-01-05 01:01:34,424 [DEBUG] __main__: Storing reference to DIRECTOR_CLIENT in src.luna_functions.
2025-01-05 01:01:34,424 [DEBUG] __main__: Registering event callbacks for RoomMessageText and InviteMemberEvent.
2025-01-05 01:01:34,424 [DEBUG] __main__: Callbacks registered successfully.
2025-01-05 01:01:34,424 [DEBUG] __main__: Starting sync_forever loop. Awaiting new events with timeout=30000.
2025-01-05 01:01:34,424 [DEBUG] __main__: sync_forever has exited (this is unexpected in normal operation).
2025-01-05 01:01:34,424 [DEBUG] __main__: Preparing to close the event loop.
2025-01-05 01:01:34,425 [INFO] __main__: Event loop closed. Exiting main function.
2025-01-05 01:01:34,447 [ERROR] asyncio: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x104a66120>
2025-01-05 01:04:08,578 [DEBUG] __main__: Added file handler to root logger. Logging to 'server.log' at DEBUG level.
2025-01-05 01:04:08,578 [DEBUG] __main__: Exiting configure_logging function.
2025-01-05 01:04:08,578 [DEBUG] __main__: Logging configuration complete.
2025-01-05 01:04:08,578 [DEBUG] __main__: Creating a new asyncio event loop.
2025-01-05 01:04:08,578 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-05 01:04:08,578 [DEBUG] __main__: Set this new loop as the default event loop for the current thread.
2025-01-05 01:04:08,578 [DEBUG] __main__: Stored reference to the new loop in MAIN_LOOP.
2025-01-05 01:04:08,578 [DEBUG] __main__: Entering start_console_thread function.
2025-01-05 01:04:08,578 [INFO] __main__: Console thread started successfully.
2025-01-05 01:04:08,578 [DEBUG] __main__: Exiting start_console_thread function.
2025-01-05 01:04:08,578 [DEBUG] __main__: Console thread has been initiated. Returning to main thread.
2025-01-05 01:04:08,578 [INFO] __main__: Starting main_logic coroutine.
2025-01-05 01:04:08,578 [DEBUG] __main__: Entering main_logic function...
2025-01-05 01:04:08,578 [DEBUG] __main__: Creating AsyncClient with homeserver='http://localhost:8008' and user='@luna:localhost'.
2025-01-05 01:04:08,579 [DEBUG] __main__: Attempting to log in the Luna with password='12345' and device_name='LunaDirector'.
2025-01-05 01:04:09,093 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'errcode': 'M_LIMIT_EXCEEDED', 'error': 'Too Many Requests', 'retry_after_ms': 178365}
2025-01-05 01:04:09,094 [WARNING] nio.responses: Error validating response: 'user_id' is a required property
2025-01-05 01:04:09,094 [WARNING] nio.client.async_client: Got 429 response (ratelimited), sleeping for 178365ms
2025-01-05 01:07:07,464 [WARNING] nio.client.async_client: Timed out, sleeping for 0s
2025-01-05 01:07:07,467 [WARNING] nio.client.async_client: Timed out, sleeping for 0s
2025-01-05 01:07:07,670 [WARNING] nio.client.async_client: Timed out, sleeping for 0s
2025-01-05 01:07:08,075 [WARNING] nio.client.async_client: Timed out, sleeping for 0s
2025-01-05 01:07:08,880 [WARNING] nio.client.async_client: Timed out, sleeping for 1s
2025-01-05 01:07:10,483 [WARNING] nio.client.async_client: Timed out, sleeping for 3s
2025-01-05 01:07:13,686 [WARNING] nio.client.async_client: Timed out, sleeping for 6s
2025-01-05 01:07:20,088 [WARNING] nio.client.async_client: Timed out, sleeping for 12s
2025-01-05 01:07:32,896 [WARNING] nio.client.async_client: Timed out, sleeping for 25s
2025-01-05 01:07:58,503 [WARNING] nio.client.async_client: Timed out, sleeping for 51s
2025-01-05 01:08:20,787 [INFO] src.console_functions: Console received 'restart' command; restarting now.
2025-01-05 01:08:21,169 [DEBUG] __main__: Added file handler to root logger. Logging to 'server.log' at DEBUG level.
2025-01-05 01:08:21,169 [DEBUG] __main__: Exiting configure_logging function.
2025-01-05 01:08:21,169 [DEBUG] __main__: Logging configuration complete.
2025-01-05 01:08:21,169 [DEBUG] __main__: Creating a new asyncio event loop.
2025-01-05 01:08:21,169 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-05 01:08:21,170 [DEBUG] __main__: Set this new loop as the default event loop for the current thread.
2025-01-05 01:08:21,170 [DEBUG] __main__: Stored reference to the new loop in MAIN_LOOP.
2025-01-05 01:08:21,170 [DEBUG] __main__: Entering start_console_thread function.
2025-01-05 01:08:21,170 [INFO] __main__: Console thread started successfully.
2025-01-05 01:08:21,170 [DEBUG] __main__: Exiting start_console_thread function.
2025-01-05 01:08:21,170 [DEBUG] __main__: Console thread has been initiated. Returning to main thread.
2025-01-05 01:08:21,170 [INFO] __main__: Starting main_logic coroutine.
2025-01-05 01:08:21,170 [DEBUG] __main__: Entering main_logic function...
2025-01-05 01:08:21,170 [DEBUG] __main__: Creating AsyncClient with homeserver='http://localhost:8008' and user='@luna:localhost'.
2025-01-05 01:08:21,170 [DEBUG] __main__: Attempting to log in the Luna with password='12345' and device_name='LunaDirector'.
2025-01-05 01:08:21,447 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'user_id': '@luna:localhost', 'access_token': 'syt_bHVuYQ_MtvmYLeIKLimvDRJykxn_06mEEn', 'home_server': 'localhost', 'device_id': 'BINDHRFQWH'}
2025-01-05 01:08:21,447 [INFO] __main__: Director logged in successfully.
2025-01-05 01:08:21,448 [DEBUG] __main__: Storing reference to DIRECTOR_CLIENT in src.luna_functions.
2025-01-05 01:08:21,448 [DEBUG] __main__: Registering event callbacks for RoomMessageText and InviteMemberEvent.
2025-01-05 01:08:21,448 [DEBUG] __main__: Callbacks registered successfully.
2025-01-05 01:08:21,448 [DEBUG] __main__: Starting sync_forever loop. Awaiting new events with timeout=30000.
2025-01-05 01:08:21,448 [DEBUG] __main__: sync_forever has exited (this is unexpected in normal operation).
2025-01-05 01:08:21,448 [DEBUG] __main__: Preparing to close the event loop.
2025-01-05 01:08:21,448 [INFO] __main__: Event loop closed. Exiting main function.
2025-01-05 01:08:21,472 [ERROR] asyncio: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x104d32120>
2025-01-05 01:09:04,995 [DEBUG] __main__: Added file handler to root logger. Logging to 'server.log' at DEBUG level.
2025-01-05 01:09:04,996 [DEBUG] __main__: Exiting configure_logging function.
2025-01-05 01:09:04,996 [DEBUG] __main__: Logging configuration complete.
2025-01-05 01:09:04,996 [DEBUG] __main__: Creating a new asyncio event loop.
2025-01-05 01:09:04,996 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-05 01:09:04,996 [DEBUG] __main__: Set this new loop as the default event loop for the current thread.
2025-01-05 01:09:04,996 [DEBUG] __main__: Stored reference to the new loop in MAIN_LOOP.
2025-01-05 01:09:04,996 [DEBUG] __main__: Entering start_console_thread function.
2025-01-05 01:09:04,996 [INFO] __main__: Console thread started successfully.
2025-01-05 01:09:04,996 [DEBUG] __main__: Exiting start_console_thread function.
2025-01-05 01:09:04,996 [DEBUG] __main__: Console thread has been initiated. Returning to main thread.
2025-01-05 01:09:04,996 [INFO] __main__: Starting main_logic coroutine.
2025-01-05 01:09:04,996 [DEBUG] __main__: Entering main_logic function...
2025-01-05 01:09:04,996 [DEBUG] __main__: Creating AsyncClient with homeserver='http://localhost:8008' and user='@luna:localhost'.
2025-01-05 01:09:04,996 [DEBUG] __main__: Attempting to log in the Luna with password='12345' and device_name='LunaDirector'.
2025-01-05 01:09:05,271 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'user_id': '@luna:localhost', 'access_token': 'syt_bHVuYQ_zLAMqvUchAsgmkBbdGMY_0JuBde', 'home_server': 'localhost', 'device_id': 'KYYCSGOXZV'}
2025-01-05 01:09:05,272 [INFO] __main__: Director logged in successfully.
2025-01-05 01:09:05,273 [DEBUG] __main__: Storing reference to DIRECTOR_CLIENT in src.luna_functions.
2025-01-05 01:09:05,273 [DEBUG] __main__: Registering event callbacks for RoomMessageText and InviteMemberEvent.
2025-01-05 01:09:05,273 [DEBUG] __main__: Callbacks registered successfully.
2025-01-05 01:09:05,273 [DEBUG] __main__: Starting sync_forever loop. Awaiting new events with timeout=30000.
2025-01-05 01:09:05,273 [DEBUG] __main__: sync_forever has exited (this is unexpected in normal operation).
2025-01-05 01:09:05,273 [DEBUG] __main__: Preparing to close the event loop.
2025-01-05 01:09:05,273 [INFO] __main__: Event loop closed. Exiting main function.
2025-01-05 01:09:05,296 [ERROR] asyncio: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x107472120>
2025-01-05 01:09:07,773 [DEBUG] __main__: Added file handler to root logger. Logging to 'server.log' at DEBUG level.
2025-01-05 01:09:07,773 [DEBUG] __main__: Exiting configure_logging function.
2025-01-05 01:09:07,773 [DEBUG] __main__: Logging configuration complete.
2025-01-05 01:09:07,773 [DEBUG] __main__: Creating a new asyncio event loop.
2025-01-05 01:09:07,773 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-05 01:09:07,773 [DEBUG] __main__: Set this new loop as the default event loop for the current thread.
2025-01-05 01:09:07,773 [DEBUG] __main__: Stored reference to the new loop in MAIN_LOOP.
2025-01-05 01:09:07,773 [DEBUG] __main__: Entering start_console_thread function.
2025-01-05 01:09:07,773 [INFO] __main__: Console thread started successfully.
2025-01-05 01:09:07,773 [DEBUG] __main__: Exiting start_console_thread function.
2025-01-05 01:09:07,773 [DEBUG] __main__: Console thread has been initiated. Returning to main thread.
2025-01-05 01:09:07,773 [INFO] __main__: Starting main_logic coroutine.
2025-01-05 01:09:07,773 [DEBUG] __main__: Entering main_logic function...
2025-01-05 01:09:07,773 [DEBUG] __main__: Creating AsyncClient with homeserver='http://localhost:8008' and user='@luna:localhost'.
2025-01-05 01:09:07,773 [DEBUG] __main__: Attempting to log in the Luna with password='12345' and device_name='LunaDirector'.
2025-01-05 01:09:08,048 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'user_id': '@luna:localhost', 'access_token': 'syt_bHVuYQ_rOYeRwbPQHfdsQRyaalh_2MAS4g', 'home_server': 'localhost', 'device_id': 'TXXKZOBMBT'}
2025-01-05 01:09:08,048 [INFO] __main__: Director logged in successfully.
2025-01-05 01:09:08,048 [DEBUG] __main__: Storing reference to DIRECTOR_CLIENT in src.luna_functions.
2025-01-05 01:09:08,048 [DEBUG] __main__: Registering event callbacks for RoomMessageText and InviteMemberEvent.
2025-01-05 01:09:08,049 [DEBUG] __main__: Callbacks registered successfully.
2025-01-05 01:09:08,049 [DEBUG] __main__: Starting sync_forever loop. Awaiting new events with timeout=30000.
2025-01-05 01:09:08,049 [DEBUG] __main__: sync_forever has exited (this is unexpected in normal operation).
2025-01-05 01:09:08,049 [DEBUG] __main__: Preparing to close the event loop.
2025-01-05 01:09:08,049 [INFO] __main__: Event loop closed. Exiting main function.
2025-01-05 01:09:08,076 [ERROR] asyncio: Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x106772120>
2025-01-05 01:09:39,765 [DEBUG] __main__: Added file handler to root logger. Logging to 'server.log' at DEBUG level.
2025-01-05 01:09:39,765 [DEBUG] __main__: Exiting configure_logging function.
2025-01-05 01:09:39,765 [DEBUG] __main__: Logging configuration complete.
2025-01-05 01:09:39,765 [DEBUG] __main__: Creating a new asyncio event loop.
2025-01-05 01:09:39,765 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-05 01:09:39,765 [DEBUG] __main__: Set this new loop as the default event loop for the current thread.
2025-01-05 01:09:39,765 [DEBUG] __main__: Stored reference to the new loop in MAIN_LOOP.
2025-01-05 01:09:39,765 [DEBUG] __main__: Entering start_console_thread function.
2025-01-05 01:09:39,765 [INFO] __main__: Console thread started successfully.
2025-01-05 01:09:39,765 [DEBUG] __main__: Exiting start_console_thread function.
2025-01-05 01:09:39,765 [DEBUG] __main__: Console thread has been initiated. Returning to main thread.
2025-01-05 01:09:39,765 [INFO] __main__: Starting main_logic coroutine.
2025-01-05 01:09:39,765 [DEBUG] __main__: Entering main_logic function...
2025-01-05 01:09:39,765 [DEBUG] __main__: Creating AsyncClient with homeserver='http://localhost:8008' and user='@luna:localhost'.
2025-01-05 01:09:39,766 [DEBUG] __main__: Attempting to log in the Luna with password='12345' and device_name='LunaDirector'.
2025-01-05 01:09:40,046 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'user_id': '@luna:localhost', 'access_token': 'syt_bHVuYQ_uzSmvMsKjTizUJVAfAOr_3SZTBU', 'home_server': 'localhost', 'device_id': 'SGDMMWBRMG'}
2025-01-05 01:09:40,046 [INFO] __main__: Director logged in successfully.
2025-01-05 01:09:40,046 [DEBUG] __main__: Storing reference to DIRECTOR_CLIENT in src.luna_functions.
2025-01-05 01:09:40,046 [DEBUG] __main__: Registering event callbacks for RoomMessageText and InviteMemberEvent.
2025-01-05 01:09:40,046 [DEBUG] __main__: Callbacks registered successfully.
2025-01-05 01:09:40,046 [DEBUG] __main__: Starting sync_forever loop. Awaiting new events with timeout=30000.
2025-01-05 01:09:40,053 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's19_79_0_8_16_1_1_16_0_1', 'account_data': {'events': [{'type': 'm.push_rules', 'content': {'global': {'underride': [{'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.call.invite'}], 'actions': ['notify', {'set_tweak': 'sound', 'value': 'ring'}, {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.call', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.encrypted'}, {'kind': 'room_member_count', 'is': '2'}], 'actions': ['notify', {'set_tweak': 'sound', 'value': 'default'}, {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.encrypted_room_one_to_one', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.message'}, {'kind': 'room_member_count', 'is': '2'}], 'actions': ['notify', {'set_tweak': 'sound', 'value': 'default'}, {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.room_one_to_one', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.message'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.message', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.encrypted'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.encrypted', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'im.vector.modular.widgets'}, {'kind': 'event_match', 'key': 'content.type', 'pattern': 'jitsi'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': '*'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.im.vector.jitsi', 'default': True, 'enabled': True}], 'sender': [], 'room': [], 'content': [{'actions': ['notify', {'set_tweak': 'highlight'}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.contains_user_name', 'default': True, 'pattern': 'luna', 'enabled': True}], 'override': [{'conditions': [], 'actions': [], 'rule_id': '.m.rule.master', 'default': True, 'enabled': False}, {'conditions': [{'kind': 'event_match', 'key': 'content.msgtype', 'pattern': 'm.notice'}], 'actions': [], 'rule_id': '.m.rule.suppress_notices', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.member'}, {'kind': 'event_match', 'key': 'content.membership', 'pattern': 'invite'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': '@luna:localhost'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.invite_for_me', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.member'}], 'actions': [], 'rule_id': '.m.rule.member_event', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_property_contains', 'key': 'content.m\\.mentions.user_ids', 'value': '@luna:localhost'}], 'actions': ['notify', {'set_tweak': 'highlight'}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.is_user_mention', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'contains_display_name'}], 'actions': ['notify', {'set_tweak': 'highlight'}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.contains_display_name', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_property_is', 'key': 'content.m\\.mentions.room', 'value': True}, {'kind': 'sender_notification_permission', 'key': 'room'}], 'actions': ['notify', {'set_tweak': 'highlight'}], 'rule_id': '.m.rule.is_room_mention', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'sender_notification_permission', 'key': 'room'}, {'kind': 'event_match', 'key': 'content.body', 'pattern': '@room'}], 'actions': ['notify', {'set_tweak': 'highlight'}], 'rule_id': '.m.rule.roomnotif', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.tombstone'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': ''}], 'actions': ['notify', {'set_tweak': 'highlight'}], 'rule_id': '.m.rule.tombstone', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.reaction'}], 'actions': [], 'rule_id': '.m.rule.reaction', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.server_acl'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': ''}], 'actions': [], 'rule_id': '.m.rule.room.server_acl', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_property_is', 'key': 'content.m\\.relates_to.rel_type', 'value': 'm.replace'}], 'actions': [], 'rule_id': '.m.rule.suppress_edits', 'default': True, 'enabled': True}]}}}]}, 'presence': {'events': [{'type': 'm.presence', 'sender': '@luna:localhost', 'content': {'presence': 'online', 'last_active_ago': 5, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'invite': {'!IQTJHuSCcTLlkCZzzF:localhost': {'invite_state': {'events': [{'type': 'm.room.join_rules', 'state_key': '', 'content': {'join_rule': 'invite'}, 'sender': '@evan:localhost'}, {'type': 'm.room.create', 'state_key': '', 'content': {'room_version': '10', 'creator': '@evan:localhost'}, 'sender': '@evan:localhost'}, {'type': 'm.room.member', 'state_key': '@evan:localhost', 'content': {'displayname': 'evan', 'membership': 'join'}, 'sender': '@evan:localhost'}, {'type': 'm.room.member', 'sender': '@evan:localhost', 'content': {'is_direct': True, 'displayname': 'luna', 'membership': 'invite'}, 'state_key': '@luna:localhost', 'origin_server_ts': 1736052751847, 'unsigned': {'age': 4628205}, 'event_id': '$Onu9WGZwyumCrQGoNUUpMOxPBwx5f9YhtmY0UnVfOQo'}]}}}}}
2025-01-05 01:09:40,058 [INFO] nio.client.base_client: New invited room !IQTJHuSCcTLlkCZzzF:localhost
2025-01-05 01:09:40,058 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type InviteMemberEvent
2025-01-05 01:09:40,058 [INFO] src.luna_functions: Received invite to !IQTJHuSCcTLlkCZzzF:localhost, AUTO_JOIN_ENABLED=True
2025-01-05 01:09:40,058 [INFO] src.luna_functions: Joining !IQTJHuSCcTLlkCZzzF:localhost...
2025-01-05 01:09:40,074 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type InviteMemberEvent
2025-01-05 01:09:40,074 [INFO] src.luna_functions: Received invite to !IQTJHuSCcTLlkCZzzF:localhost, AUTO_JOIN_ENABLED=True
2025-01-05 01:09:40,074 [INFO] src.luna_functions: Joining !IQTJHuSCcTLlkCZzzF:localhost...
2025-01-05 01:09:40,093 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's20_79_0_8_16_1_1_16_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'unavailable', 'last_active_ago': 81056}}]}, 'device_lists': {'changed': ['@evan:localhost', '@luna:localhost']}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'join': {'!IQTJHuSCcTLlkCZzzF:localhost': {'timeline': {'events': [{'type': 'm.room.member', 'sender': '@evan:localhost', 'content': {'displayname': 'evan', 'membership': 'join'}, 'state_key': '@evan:localhost', 'origin_server_ts': 1736052751801, 'unsigned': {'membership': 'leave', 'age': 4628290}, 'event_id': '$j7fAv2HEqY8V1DI17DT4zijOlajgG9GVg41Q41j06a4'}, {'type': 'm.room.power_levels', 'sender': '@evan:localhost', 'content': {'users': {'@evan:localhost': 100, '@luna:localhost': 100}, 'users_default': 0, 'events': {'m.room.name': 50, 'm.room.avatar': 50, 'm.room.power_levels': 100, 'm.room.history_visibility': 100, 'm.room.canonical_alias': 50, 'm.room.tombstone': 100, 'm.room.server_acl': 100, 'm.room.encryption': 100, 'org.matrix.msc3401.call.member': 0, 'org.matrix.msc3401.call': 100}, 'events_default': 0, 'state_default': 50, 'ban': 50, 'kick': 50, 'redact': 50, 'invite': 0, 'historical': 100}, 'state_key': '', 'origin_server_ts': 1736052751815, 'unsigned': {'membership': 'leave', 'age': 4628276}, 'event_id': '$ANVxwJ3XZdDykqPe_Z6FPtzGY2NlNA5HUTJ62kTnKos'}, {'type': 'm.room.join_rules', 'sender': '@evan:localhost', 'content': {'join_rule': 'invite'}, 'state_key': '', 'origin_server_ts': 1736052751821, 'unsigned': {'membership': 'leave', 'age': 4628270}, 'event_id': '$7nojP32lKzL3033GBqeYjoiWf3uxQ4tESU16FgC_INA'}, {'type': 'm.room.history_visibility', 'sender': '@evan:localhost', 'content': {'history_visibility': 'shared'}, 'state_key': '', 'origin_server_ts': 1736052751821, 'unsigned': {'membership': 'leave', 'age': 4628270}, 'event_id': '$ykzg9hb0g4xCy9jC3mO2gMpbmOV6GYPlqgQ90qcalfg'}, {'type': 'm.room.guest_access', 'sender': '@evan:localhost', 'content': {'guest_access': 'can_join'}, 'state_key': '', 'origin_server_ts': 1736052751822, 'unsigned': {'membership': 'leave', 'age': 4628269}, 'event_id': '$ccGh4WQIGUj5hBbN5BxUh0YrYv6WNQ2A9DgNz1ozQ4E'}, {'type': 'm.room.member', 'sender': '@evan:localhost', 'content': {'is_direct': True, 'displayname': 'luna', 'membership': 'invite'}, 'state_key': '@luna:localhost', 'origin_server_ts': 1736052751847, 'unsigned': {'membership': 'invite', 'age': 4628244}, 'event_id': '$Onu9WGZwyumCrQGoNUUpMOxPBwx5f9YhtmY0UnVfOQo'}, {'type': 'm.room.message', 'sender': '@evan:localhost', 'content': {'msgtype': 'm.text', 'body': 'hello', 'm.mentions': {}}, 'origin_server_ts': 1736052752400, 'unsigned': {'membership': 'invite', 'age': 4627691}, 'event_id': '$VZtoARzZX862BlOEGGjAg9Q5vVS6wAP9n_rIF8dlIp4'}, {'type': 'm.room.message', 'sender': '@evan:localhost', 'content': {'msgtype': 'm.text', 'body': 'hello', 'm.mentions': {}}, 'origin_server_ts': 1736052773009, 'unsigned': {'membership': 'invite', 'age': 4607082}, 'event_id': '$dfXcqOqFl_QWYFnohc9G_JTVG-w9NwgVazdt5XiMtLA'}, {'type': 'm.room.message', 'sender': '@evan:localhost', 'content': {'msgtype': 'm.text', 'body': 'test', 'm.mentions': {}}, 'origin_server_ts': 1736053860256, 'unsigned': {'membership': 'invite', 'age': 3519835}, 'event_id': '$CGbkSuVwEo0ZFdr7BjMVMG_JR6t6oOvBQ47eRI3jrSw'}, {'type': 'm.room.member', 'sender': '@luna:localhost', 'content': {'displayname': 'luna', 'membership': 'join'}, 'state_key': '@luna:localhost', 'origin_server_ts': 1736057380062, 'unsigned': {'replaces_state': '$Onu9WGZwyumCrQGoNUUpMOxPBwx5f9YhtmY0UnVfOQo', 'prev_content': {'is_direct': True, 'displayname': 'luna', 'membership': 'invite'}, 'prev_sender': '@evan:localhost', 'membership': 'join', 'age': 29}, 'event_id': '$7lSfWVf-YQE1Te1nNseWF1aY1XyyoxensnEHKsHHds4'}], 'prev_batch': 's2_79_0_8_16_1_1_16_0_1', 'limited': True}, 'state': {'events': [{'type': 'm.room.create', 'sender': '@evan:localhost', 'content': {'room_version': '10', 'creator': '@evan:localhost'}, 'state_key': '', 'origin_server_ts': 1736052751773, 'unsigned': {'age': 4628318}, 'event_id': '$__sN0iTtcNYm1zFh_4r6pW-jPfL80ilncF-o9lktU5c'}]}, 'account_data': {'events': []}, 'ephemeral': {'events': []}, 'unread_notifications': {'notification_count': 0, 'highlight_count': 0}, 'summary': {}}}}}
2025-01-05 01:09:40,097 [INFO] nio.client.base_client: New joined room !IQTJHuSCcTLlkCZzzF:localhost
2025-01-05 01:09:40,097 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomCreateEvent
2025-01-05 01:09:40,097 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type PowerLevelsEvent
2025-01-05 01:09:40,097 [INFO] nio.rooms: Changing power level for user @evan:localhost from 0 to 100
2025-01-05 01:09:40,097 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomJoinRulesEvent
2025-01-05 01:09:40,097 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomHistoryVisibilityEvent
2025-01-05 01:09:40,098 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomGuestAccessEvent
2025-01-05 01:09:40,098 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomMessageText
2025-01-05 01:09:40,098 [INFO] src.luna_functions: Received message in !IQTJHuSCcTLlkCZzzF:localhost from @evan:localhost: hello
2025-01-05 01:09:40,098 [DEBUG] src.luna_functions: Sending response: Hello @evan:localhost, you said 'hello' (auto-respond).
2025-01-05 01:09:40,113 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomMessageText
2025-01-05 01:09:40,113 [INFO] src.luna_functions: Received message in !IQTJHuSCcTLlkCZzzF:localhost from @evan:localhost: hello
2025-01-05 01:09:40,113 [DEBUG] src.luna_functions: Sending response: Hello @evan:localhost, you said 'hello' (auto-respond).
2025-01-05 01:09:40,135 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomMessageText
2025-01-05 01:09:40,135 [INFO] src.luna_functions: Received message in !IQTJHuSCcTLlkCZzzF:localhost from @evan:localhost: test
2025-01-05 01:09:40,135 [DEBUG] src.luna_functions: Sending response: Hello @evan:localhost, you said 'test' (auto-respond).
2025-01-05 01:09:40,149 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_79_0_8_16_1_1_16_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'join': {'!IQTJHuSCcTLlkCZzzF:localhost': {'timeline': {'events': [{'type': 'm.room.message', 'sender': '@luna:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'hello' (auto-respond)."}, 'origin_server_ts': 1736057380100, 'unsigned': {'membership': 'join', 'age': 48, 'transaction_id': 'dc50d0f4-0a52-4b37-81d3-ded4a57a835c'}, 'event_id': '$VxJ9cc_kbUmS1eN2oqAc-MNjC7w3TpUdkkc-KmwD20A'}, {'type': 'm.room.message', 'sender': '@luna:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'hello' (auto-respond)."}, 'origin_server_ts': 1736057380117, 'unsigned': {'membership': 'join', 'age': 31, 'transaction_id': '366026b4-f01e-497c-9582-e402abca6edb'}, 'event_id': '$7RbKcPnODrWz2VYHfyK3H6BO1bTNfh9HmjbssVG4Kbo'}, {'type': 'm.room.message', 'sender': '@luna:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'test' (auto-respond)."}, 'origin_server_ts': 1736057380137, 'unsigned': {'membership': 'join', 'age': 11, 'transaction_id': '8b778e14-b9aa-4610-a791-c6e9c6300b3c'}, 'event_id': '$tMgK2a6BECXS_y4nJYAWbJZ2hkMqOQhl-8NaPOYaVqY'}], 'prev_batch': 's20_79_0_8_16_1_1_16_0_1', 'limited': False}, 'state': {'events': []}, 'account_data': {'events': []}, 'ephemeral': {'events': []}, 'unread_notifications': {'notification_count': 0, 'highlight_count': 0}, 'summary': {}}}}}
2025-01-05 01:09:40,149 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomMessageText
2025-01-05 01:09:40,149 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-05 01:09:40,149 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomMessageText
2025-01-05 01:09:40,149 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-05 01:09:40,149 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomMessageText
2025-01-05 01:09:40,149 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-05 01:09:42,577 [DEBUG] src.console_functions: Showing help to user.
2025-01-05 01:09:46,183 [INFO] src.console_functions: Console screen cleared.
2025-01-05 01:09:51,762 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_80_0_8_16_1_1_16_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'online', 'last_active_ago': 13, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:09:51,783 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_80_0_9_16_1_1_16_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'join': {'!IQTJHuSCcTLlkCZzzF:localhost': {'timeline': {'events': [], 'prev_batch': 's23_80_0_8_16_1_1_16_0_1', 'limited': False}, 'state': {'events': []}, 'account_data': {'events': []}, 'ephemeral': {'events': [{'type': 'm.receipt', 'content': {'$tMgK2a6BECXS_y4nJYAWbJZ2hkMqOQhl-8NaPOYaVqY': {'m.read': {'@evan:localhost': {'ts': 1736057391756, 'thread_id': 'main'}}}}}]}, 'unread_notifications': {'notification_count': 0, 'highlight_count': 0}, 'summary': {}}}}}
2025-01-05 01:10:21,800 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_82_0_9_16_1_1_16_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'online', 'last_active_ago': 29994, 'currently_active': True}}, {'type': 'm.presence', 'sender': '@luna:localhost', 'content': {'presence': 'online', 'last_active_ago': 30008, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:10:51,810 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_82_0_9_16_1_1_16_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:11:21,818 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_82_0_9_16_1_1_16_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:11:21,827 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_84_0_9_16_1_1_16_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@luna:localhost', 'content': {'presence': 'online', 'last_active_ago': 3, 'currently_active': True}}, {'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'online', 'last_active_ago': 29977, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:11:51,839 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_84_0_9_16_1_1_16_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:12:21,862 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_84_0_9_17_1_1_16_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:12:21,872 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_86_0_9_17_1_1_16_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@luna:localhost', 'content': {'presence': 'online', 'last_active_ago': 4, 'currently_active': True}}, {'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'online', 'last_active_ago': 15307, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:12:51,884 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_86_0_9_17_1_1_16_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:13:21,900 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_86_0_9_17_1_1_16_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:13:21,908 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_88_0_9_17_1_1_16_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@luna:localhost', 'content': {'presence': 'online', 'last_active_ago': 2, 'currently_active': True}}, {'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'online', 'last_active_ago': 15276, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:13:51,918 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_88_0_9_17_1_1_16_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:14:21,930 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_88_0_9_17_1_1_16_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:14:21,943 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_90_0_9_17_1_1_16_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@luna:localhost', 'content': {'presence': 'online', 'last_active_ago': 3, 'currently_active': True}}, {'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'online', 'last_active_ago': 15225, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:14:51,952 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_90_0_9_17_1_1_16_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:15:21,962 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_90_0_9_17_1_1_16_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:15:21,969 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_92_0_9_17_1_1_16_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@luna:localhost', 'content': {'presence': 'online', 'last_active_ago': 2, 'currently_active': True}}, {'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'online', 'last_active_ago': 15187, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:15:51,974 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_92_0_9_17_1_1_16_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:16:21,984 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_92_0_9_17_1_1_16_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:16:21,995 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_94_0_9_17_1_1_16_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@luna:localhost', 'content': {'presence': 'online', 'last_active_ago': 4, 'currently_active': True}}, {'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'online', 'last_active_ago': 15161, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:16:28,878 [WARNING] __main__: KeyboardInterrupt received. Shutting down Director.
2025-01-05 01:16:28,879 [DEBUG] __main__: Preparing to close the event loop.
2025-01-05 01:16:28,879 [INFO] __main__: Event loop closed. Exiting main function.
2025-01-05 01:16:30,945 [DEBUG] __main__: Added file handler to root logger. Logging to 'server.log' at DEBUG level.
2025-01-05 01:16:30,945 [DEBUG] __main__: Exiting configure_logging function.
2025-01-05 01:16:30,945 [DEBUG] __main__: Logging configuration complete.
2025-01-05 01:16:30,945 [DEBUG] __main__: Creating a new asyncio event loop.
2025-01-05 01:16:30,945 [DEBUG] asyncio: Using selector: KqueueSelector
2025-01-05 01:16:30,945 [DEBUG] __main__: Set this new loop as the default event loop for the current thread.
2025-01-05 01:16:30,945 [DEBUG] __main__: Stored reference to the new loop in MAIN_LOOP.
2025-01-05 01:16:30,945 [DEBUG] __main__: Entering start_console_thread function.
2025-01-05 01:16:30,945 [INFO] __main__: Console thread started successfully.
2025-01-05 01:16:30,945 [DEBUG] __main__: Exiting start_console_thread function.
2025-01-05 01:16:30,945 [DEBUG] __main__: Console thread has been initiated. Returning to main thread.
2025-01-05 01:16:30,945 [INFO] __main__: Starting main_logic coroutine.
2025-01-05 01:16:30,945 [DEBUG] __main__: Entering main_logic function...
2025-01-05 01:16:30,945 [DEBUG] __main__: Attempting to load or log in the client.
2025-01-05 01:16:30,945 [DEBUG] src.luna_functions: No valid token found, attempting normal password login.
2025-01-05 01:16:31,230 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'user_id': {'type': 'string', 'format': 'user_id'}, 'device_id': {'type': 'string'}, 'access_token': {'type': 'string'}}, 'required': ['user_id', 'device_id', 'access_token']}: {'user_id': '@luna:localhost', 'access_token': 'syt_bHVuYQ_sRqyXnuDxUNluCRFtxox_4GLq8U', 'home_server': 'localhost', 'device_id': 'GXMLNIEZBH'}
2025-01-05 01:16:31,231 [INFO] src.luna_functions: Password login succeeded, storing token.
2025-01-05 01:16:31,232 [DEBUG] src.luna_functions: Token info for @luna:localhost saved to director_token.json.
2025-01-05 01:16:31,232 [DEBUG] __main__: Client obtained. Storing reference to DIRECTOR_CLIENT in src.luna_functions.
2025-01-05 01:16:31,232 [DEBUG] __main__: Callbacks registered successfully.
2025-01-05 01:16:31,232 [DEBUG] __main__: Starting sync_forever loop. Awaiting new events with timeout=30000.
2025-01-05 01:16:31,244 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's23_94_0_9_17_1_1_17_0_1', 'account_data': {'events': [{'type': 'm.push_rules', 'content': {'global': {'underride': [{'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.call.invite'}], 'actions': ['notify', {'set_tweak': 'sound', 'value': 'ring'}, {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.call', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.encrypted'}, {'kind': 'room_member_count', 'is': '2'}], 'actions': ['notify', {'set_tweak': 'sound', 'value': 'default'}, {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.encrypted_room_one_to_one', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.message'}, {'kind': 'room_member_count', 'is': '2'}], 'actions': ['notify', {'set_tweak': 'sound', 'value': 'default'}, {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.room_one_to_one', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.message'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.message', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.encrypted'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.m.rule.encrypted', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'im.vector.modular.widgets'}, {'kind': 'event_match', 'key': 'content.type', 'pattern': 'jitsi'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': '*'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}], 'rule_id': '.im.vector.jitsi', 'default': True, 'enabled': True}], 'sender': [], 'room': [], 'content': [{'actions': ['notify', {'set_tweak': 'highlight'}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.contains_user_name', 'default': True, 'pattern': 'luna', 'enabled': True}], 'override': [{'conditions': [], 'actions': [], 'rule_id': '.m.rule.master', 'default': True, 'enabled': False}, {'conditions': [{'kind': 'event_match', 'key': 'content.msgtype', 'pattern': 'm.notice'}], 'actions': [], 'rule_id': '.m.rule.suppress_notices', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.member'}, {'kind': 'event_match', 'key': 'content.membership', 'pattern': 'invite'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': '@luna:localhost'}], 'actions': ['notify', {'set_tweak': 'highlight', 'value': False}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.invite_for_me', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.member'}], 'actions': [], 'rule_id': '.m.rule.member_event', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_property_contains', 'key': 'content.m\\.mentions.user_ids', 'value': '@luna:localhost'}], 'actions': ['notify', {'set_tweak': 'highlight'}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.is_user_mention', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'contains_display_name'}], 'actions': ['notify', {'set_tweak': 'highlight'}, {'set_tweak': 'sound', 'value': 'default'}], 'rule_id': '.m.rule.contains_display_name', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_property_is', 'key': 'content.m\\.mentions.room', 'value': True}, {'kind': 'sender_notification_permission', 'key': 'room'}], 'actions': ['notify', {'set_tweak': 'highlight'}], 'rule_id': '.m.rule.is_room_mention', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'sender_notification_permission', 'key': 'room'}, {'kind': 'event_match', 'key': 'content.body', 'pattern': '@room'}], 'actions': ['notify', {'set_tweak': 'highlight'}], 'rule_id': '.m.rule.roomnotif', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.tombstone'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': ''}], 'actions': ['notify', {'set_tweak': 'highlight'}], 'rule_id': '.m.rule.tombstone', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.reaction'}], 'actions': [], 'rule_id': '.m.rule.reaction', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_match', 'key': 'type', 'pattern': 'm.room.server_acl'}, {'kind': 'event_match', 'key': 'state_key', 'pattern': ''}], 'actions': [], 'rule_id': '.m.rule.room.server_acl', 'default': True, 'enabled': True}, {'conditions': [{'kind': 'event_property_is', 'key': 'content.m\\.relates_to.rel_type', 'value': 'm.replace'}], 'actions': [], 'rule_id': '.m.rule.suppress_edits', 'default': True, 'enabled': True}]}}}]}, 'presence': {'events': [{'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'online', 'last_active_ago': 1, 'currently_active': True}}, {'type': 'm.presence', 'sender': '@luna:localhost', 'content': {'presence': 'online', 'last_active_ago': 6, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'join': {'!IQTJHuSCcTLlkCZzzF:localhost': {'timeline': {'events': [{'type': 'm.room.history_visibility', 'sender': '@evan:localhost', 'content': {'history_visibility': 'shared'}, 'state_key': '', 'origin_server_ts': 1736052751821, 'unsigned': {'membership': 'leave', 'age': 5039419}, 'event_id': '$ykzg9hb0g4xCy9jC3mO2gMpbmOV6GYPlqgQ90qcalfg'}, {'type': 'm.room.guest_access', 'sender': '@evan:localhost', 'content': {'guest_access': 'can_join'}, 'state_key': '', 'origin_server_ts': 1736052751822, 'unsigned': {'membership': 'leave', 'age': 5039418}, 'event_id': '$ccGh4WQIGUj5hBbN5BxUh0YrYv6WNQ2A9DgNz1ozQ4E'}, {'type': 'm.room.member', 'sender': '@evan:localhost', 'content': {'is_direct': True, 'displayname': 'luna', 'membership': 'invite'}, 'state_key': '@luna:localhost', 'origin_server_ts': 1736052751847, 'unsigned': {'membership': 'invite', 'age': 5039393}, 'event_id': '$Onu9WGZwyumCrQGoNUUpMOxPBwx5f9YhtmY0UnVfOQo'}, {'type': 'm.room.message', 'sender': '@evan:localhost', 'content': {'msgtype': 'm.text', 'body': 'hello', 'm.mentions': {}}, 'origin_server_ts': 1736052752400, 'unsigned': {'membership': 'invite', 'age': 5038840}, 'event_id': '$VZtoARzZX862BlOEGGjAg9Q5vVS6wAP9n_rIF8dlIp4'}, {'type': 'm.room.message', 'sender': '@evan:localhost', 'content': {'msgtype': 'm.text', 'body': 'hello', 'm.mentions': {}}, 'origin_server_ts': 1736052773009, 'unsigned': {'membership': 'invite', 'age': 5018231}, 'event_id': '$dfXcqOqFl_QWYFnohc9G_JTVG-w9NwgVazdt5XiMtLA'}, {'type': 'm.room.message', 'sender': '@evan:localhost', 'content': {'msgtype': 'm.text', 'body': 'test', 'm.mentions': {}}, 'origin_server_ts': 1736053860256, 'unsigned': {'membership': 'invite', 'age': 3930984}, 'event_id': '$CGbkSuVwEo0ZFdr7BjMVMG_JR6t6oOvBQ47eRI3jrSw'}, {'type': 'm.room.member', 'sender': '@luna:localhost', 'content': {'displayname': 'luna', 'membership': 'join'}, 'state_key': '@luna:localhost', 'origin_server_ts': 1736057380062, 'unsigned': {'replaces_state': '$Onu9WGZwyumCrQGoNUUpMOxPBwx5f9YhtmY0UnVfOQo', 'prev_content': {'is_direct': True, 'displayname': 'luna', 'membership': 'invite'}, 'prev_sender': '@evan:localhost', 'membership': 'join', 'age': 411178}, 'event_id': '$7lSfWVf-YQE1Te1nNseWF1aY1XyyoxensnEHKsHHds4'}, {'type': 'm.room.message', 'sender': '@luna:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'hello' (auto-respond)."}, 'origin_server_ts': 1736057380100, 'unsigned': {'membership': 'join', 'age': 411140}, 'event_id': '$VxJ9cc_kbUmS1eN2oqAc-MNjC7w3TpUdkkc-KmwD20A'}, {'type': 'm.room.message', 'sender': '@luna:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'hello' (auto-respond)."}, 'origin_server_ts': 1736057380117, 'unsigned': {'membership': 'join', 'age': 411123}, 'event_id': '$7RbKcPnODrWz2VYHfyK3H6BO1bTNfh9HmjbssVG4Kbo'}, {'type': 'm.room.message', 'sender': '@luna:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'test' (auto-respond)."}, 'origin_server_ts': 1736057380137, 'unsigned': {'membership': 'join', 'age': 411103}, 'event_id': '$tMgK2a6BECXS_y4nJYAWbJZ2hkMqOQhl-8NaPOYaVqY'}], 'prev_batch': 's5_94_0_9_17_1_1_17_0_1', 'limited': True}, 'state': {'events': [{'type': 'm.room.join_rules', 'sender': '@evan:localhost', 'content': {'join_rule': 'invite'}, 'state_key': '', 'origin_server_ts': 1736052751821, 'unsigned': {'age': 5039419}, 'event_id': '$7nojP32lKzL3033GBqeYjoiWf3uxQ4tESU16FgC_INA'}, {'type': 'm.room.create', 'sender': '@evan:localhost', 'content': {'room_version': '10', 'creator': '@evan:localhost'}, 'state_key': '', 'origin_server_ts': 1736052751773, 'unsigned': {'age': 5039467}, 'event_id': '$__sN0iTtcNYm1zFh_4r6pW-jPfL80ilncF-o9lktU5c'}, {'type': 'm.room.power_levels', 'sender': '@evan:localhost', 'content': {'users': {'@evan:localhost': 100, '@luna:localhost': 100}, 'users_default': 0, 'events': {'m.room.name': 50, 'm.room.avatar': 50, 'm.room.power_levels': 100, 'm.room.history_visibility': 100, 'm.room.canonical_alias': 50, 'm.room.tombstone': 100, 'm.room.server_acl': 100, 'm.room.encryption': 100, 'org.matrix.msc3401.call.member': 0, 'org.matrix.msc3401.call': 100}, 'events_default': 0, 'state_default': 50, 'ban': 50, 'kick': 50, 'redact': 50, 'invite': 0, 'historical': 100}, 'state_key': '', 'origin_server_ts': 1736052751815, 'unsigned': {'age': 5039425}, 'event_id': '$ANVxwJ3XZdDykqPe_Z6FPtzGY2NlNA5HUTJ62kTnKos'}, {'type': 'm.room.member', 'sender': '@evan:localhost', 'content': {'displayname': 'evan', 'membership': 'join'}, 'state_key': '@evan:localhost', 'origin_server_ts': 1736052751801, 'unsigned': {'age': 5039439}, 'event_id': '$j7fAv2HEqY8V1DI17DT4zijOlajgG9GVg41Q41j06a4'}]}, 'account_data': {'events': []}, 'ephemeral': {'events': [{'type': 'm.receipt', 'content': {'$tMgK2a6BECXS_y4nJYAWbJZ2hkMqOQhl-8NaPOYaVqY': {'m.read': {'@evan:localhost': {'ts': 1736057391756, 'thread_id': 'main'}}}}}]}, 'unread_notifications': {'notification_count': 0, 'highlight_count': 0}, 'summary': {}}}}}
2025-01-05 01:16:31,248 [INFO] nio.client.base_client: New joined room !IQTJHuSCcTLlkCZzzF:localhost
2025-01-05 01:16:31,248 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomJoinRulesEvent
2025-01-05 01:16:31,248 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomCreateEvent
2025-01-05 01:16:31,248 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type PowerLevelsEvent
2025-01-05 01:16:31,248 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomHistoryVisibilityEvent
2025-01-05 01:16:31,248 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomGuestAccessEvent
2025-01-05 01:16:31,248 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomMessageText
2025-01-05 01:16:31,248 [INFO] src.luna_functions: Received message in !IQTJHuSCcTLlkCZzzF:localhost from @evan:localhost: hello
2025-01-05 01:16:31,248 [DEBUG] src.luna_functions: Sending response: Hello @evan:localhost, you said 'hello' (auto-respond).
2025-01-05 01:16:31,257 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomMessageText
2025-01-05 01:16:31,257 [INFO] src.luna_functions: Received message in !IQTJHuSCcTLlkCZzzF:localhost from @evan:localhost: hello
2025-01-05 01:16:31,258 [DEBUG] src.luna_functions: Sending response: Hello @evan:localhost, you said 'hello' (auto-respond).
2025-01-05 01:16:31,276 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomMessageText
2025-01-05 01:16:31,276 [INFO] src.luna_functions: Received message in !IQTJHuSCcTLlkCZzzF:localhost from @evan:localhost: test
2025-01-05 01:16:31,276 [DEBUG] src.luna_functions: Sending response: Hello @evan:localhost, you said 'test' (auto-respond).
2025-01-05 01:16:31,289 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomMessageText
2025-01-05 01:16:31,289 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-05 01:16:31,289 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomMessageText
2025-01-05 01:16:31,289 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-05 01:16:31,289 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomMessageText
2025-01-05 01:16:31,289 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-05 01:16:31,295 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's26_94_0_9_17_1_1_17_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'join': {'!IQTJHuSCcTLlkCZzzF:localhost': {'timeline': {'events': [{'type': 'm.room.message', 'sender': '@luna:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'hello' (auto-respond)."}, 'origin_server_ts': 1736057791250, 'unsigned': {'membership': 'join', 'age': 44, 'transaction_id': 'c4e93f76-f190-4115-8d68-1aa3723a37bc'}, 'event_id': '$XBqgu4Y1j3GWICHXRCPOckOMR2RSpG5435g_4HGO4Ig'}, {'type': 'm.room.message', 'sender': '@luna:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'hello' (auto-respond)."}, 'origin_server_ts': 1736057791259, 'unsigned': {'membership': 'join', 'age': 35, 'transaction_id': 'f0872609-8660-481b-bb8a-2c43959cbdf1'}, 'event_id': '$0TuNGl1UTfY4p3hfQe1uXJAwrthgoEzxZNrNN8frRPg'}, {'type': 'm.room.message', 'sender': '@luna:localhost', 'content': {'msgtype': 'm.text', 'body': "Hello @evan:localhost, you said 'test' (auto-respond)."}, 'origin_server_ts': 1736057791279, 'unsigned': {'membership': 'join', 'age': 15, 'transaction_id': 'c2947a27-b61a-4c9d-b9b4-947a3d862f11'}, 'event_id': '$WO9p_ZxWNOxu-MLWe6axuDQhuz8LO7GUsIe2hcobHYw'}], 'prev_batch': 's23_94_0_9_17_1_1_17_0_1', 'limited': False}, 'state': {'events': []}, 'account_data': {'events': []}, 'ephemeral': {'events': []}, 'unread_notifications': {'notification_count': 0, 'highlight_count': 0}, 'summary': {}}}}}
2025-01-05 01:16:31,296 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomMessageText
2025-01-05 01:16:31,296 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-05 01:16:31,296 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomMessageText
2025-01-05 01:16:31,296 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-05 01:16:31,296 [INFO] nio.rooms: Room !IQTJHuSCcTLlkCZzzF:localhost handling event of type RoomMessageText
2025-01-05 01:16:31,296 [DEBUG] src.luna_functions: Received message from ourselves; ignoring.
2025-01-05 01:16:58,038 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's26_94_0_10_17_1_1_17_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'join': {'!IQTJHuSCcTLlkCZzzF:localhost': {'timeline': {'events': [], 'prev_batch': 's26_94_0_9_17_1_1_17_0_1', 'limited': False}, 'state': {'events': []}, 'account_data': {'events': []}, 'ephemeral': {'events': [{'type': 'm.receipt', 'content': {'$WO9p_ZxWNOxu-MLWe6axuDQhuz8LO7GUsIe2hcobHYw': {'m.read': {'@evan:localhost': {'ts': 1736057818014, 'thread_id': 'main'}}}}}]}, 'unread_notifications': {'notification_count': 0, 'highlight_count': 0}, 'summary': {}}}}}
2025-01-05 01:17:17,808 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's27_96_0_11_20_1_1_17_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@luna:localhost', 'content': {'presence': 'online', 'last_active_ago': 19763, 'currently_active': True}}, {'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'online', 'last_active_ago': 5109, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'invite': {'!roKWYbjbZOVUoYPFtD:localhost': {'invite_state': {'events': [{'type': 'm.room.join_rules', 'state_key': '', 'content': {'join_rule': 'invite'}, 'sender': '@evan:localhost'}, {'type': 'm.room.create', 'state_key': '', 'content': {'room_version': '10', 'creator': '@evan:localhost'}, 'sender': '@evan:localhost'}, {'type': 'm.room.encryption', 'state_key': '', 'content': {'algorithm': 'm.megolm.v1.aes-sha2'}, 'sender': '@evan:localhost'}, {'type': 'm.room.name', 'state_key': '', 'content': {'name': '123'}, 'sender': '@evan:localhost'}, {'type': 'm.room.member', 'state_key': '@evan:localhost', 'content': {'displayname': 'evan', 'membership': 'join'}, 'sender': '@evan:localhost'}, {'type': 'm.room.member', 'sender': '@evan:localhost', 'content': {'displayname': 'luna', 'membership': 'invite'}, 'state_key': '@luna:localhost', 'origin_server_ts': 1736057837779, 'unsigned': {'age': 27}, 'event_id': '$MrmZk9Z8K5RI4fN6iUDu1x9N7FaV92O9zMvaaBdHPLU'}]}}}}}
2025-01-05 01:17:17,810 [INFO] nio.client.base_client: New invited room !roKWYbjbZOVUoYPFtD:localhost
2025-01-05 01:17:17,810 [INFO] nio.rooms: Room !roKWYbjbZOVUoYPFtD:localhost handling event of type InviteNameEvent
2025-01-05 01:17:17,811 [INFO] nio.rooms: Room !roKWYbjbZOVUoYPFtD:localhost handling event of type InviteMemberEvent
2025-01-05 01:17:17,811 [INFO] src.luna_functions: Received invite to !roKWYbjbZOVUoYPFtD:localhost, joining now.
2025-01-05 01:17:17,834 [INFO] nio.rooms: Room !roKWYbjbZOVUoYPFtD:localhost handling event of type InviteMemberEvent
2025-01-05 01:17:17,835 [INFO] src.luna_functions: Received invite to !roKWYbjbZOVUoYPFtD:localhost, joining now.
2025-01-05 01:17:17,858 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's28_96_0_11_20_1_1_17_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'online', 'last_active_ago': 12, 'currently_active': True}}]}, 'device_lists': {'changed': ['@evan:localhost', '@luna:localhost']}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'join': {'!roKWYbjbZOVUoYPFtD:localhost': {'timeline': {'events': [{'type': 'm.room.create', 'sender': '@evan:localhost', 'content': {'room_version': '10', 'creator': '@evan:localhost'}, 'state_key': '', 'origin_server_ts': 1736053515270, 'unsigned': {'membership': 'leave', 'age': 4322586}, 'event_id': '$VPNVhyDIVe4I9BJJE4UBLHfQRlpaEuOSqJq--_KUb6A'}, {'type': 'm.room.member', 'sender': '@evan:localhost', 'content': {'displayname': 'evan', 'membership': 'join'}, 'state_key': '@evan:localhost', 'origin_server_ts': 1736053515299, 'unsigned': {'membership': 'leave', 'age': 4322557}, 'event_id': '$NEBr5thdeWLJ4lk87FiH_u-eFWHvJhkAmfj7VpMJw3k'}, {'type': 'm.room.power_levels', 'sender': '@evan:localhost', 'content': {'users': {'@evan:localhost': 100}, 'users_default': 0, 'events': {'m.room.name': 50, 'm.room.avatar': 50, 'm.room.power_levels': 100, 'm.room.history_visibility': 100, 'm.room.canonical_alias': 50, 'm.room.tombstone': 100, 'm.room.server_acl': 100, 'm.room.encryption': 100, 'org.matrix.msc3401.call.member': 0, 'org.matrix.msc3401.call': 100}, 'events_default': 0, 'state_default': 50, 'ban': 50, 'kick': 50, 'redact': 50, 'invite': 0, 'historical': 100}, 'state_key': '', 'origin_server_ts': 1736053515313, 'unsigned': {'membership': 'leave', 'age': 4322543}, 'event_id': '$Cr4-TnRYtloOopYJY4fUjVRHCOgVkahVqMSuKNaX7vo'}, {'type': 'm.room.join_rules', 'sender': '@evan:localhost', 'content': {'join_rule': 'invite'}, 'state_key': '', 'origin_server_ts': 1736053515322, 'unsigned': {'membership': 'leave', 'age': 4322534}, 'event_id': '$P5aiLlSAUOXxBImpDNF3gDATGV61b6brjF5D_LMKhVA'}, {'type': 'm.room.history_visibility', 'sender': '@evan:localhost', 'content': {'history_visibility': 'shared'}, 'state_key': '', 'origin_server_ts': 1736053515322, 'unsigned': {'membership': 'leave', 'age': 4322534}, 'event_id': '$wTTK2Na2mInVBYG4ag1qSLjTHOqDyh1wy16ue-N2wXk'}, {'type': 'm.room.guest_access', 'sender': '@evan:localhost', 'content': {'guest_access': 'can_join'}, 'state_key': '', 'origin_server_ts': 1736053515322, 'unsigned': {'membership': 'leave', 'age': 4322534}, 'event_id': '$pRJ816TPGDnlKnf_01Cn76hocngd5hRNW9PuFN_yfYE'}, {'type': 'm.room.encryption', 'sender': '@evan:localhost', 'content': {'algorithm': 'm.megolm.v1.aes-sha2'}, 'state_key': '', 'origin_server_ts': 1736053515322, 'unsigned': {'membership': 'leave', 'age': 4322534}, 'event_id': '$slPmN266Llp3KKO2lg03rJBq5SE7VnEZjdBOdm3J9KI'}, {'type': 'm.room.name', 'sender': '@evan:localhost', 'content': {'name': '123'}, 'state_key': '', 'origin_server_ts': 1736053515323, 'unsigned': {'membership': 'leave', 'age': 4322533}, 'event_id': '$q8hWvvAF2jEjQT1zwOTdZB3LvayLvQXQLSYV3-EMYYs'}, {'type': 'm.room.member', 'sender': '@evan:localhost', 'content': {'displayname': 'luna', 'membership': 'invite'}, 'state_key': '@luna:localhost', 'origin_server_ts': 1736057837779, 'unsigned': {'membership': 'invite', 'age': 77}, 'event_id': '$MrmZk9Z8K5RI4fN6iUDu1x9N7FaV92O9zMvaaBdHPLU'}, {'type': 'm.room.member', 'sender': '@luna:localhost', 'content': {'displayname': 'luna', 'membership': 'join'}, 'state_key': '@luna:localhost', 'origin_server_ts': 1736057837817, 'unsigned': {'replaces_state': '$MrmZk9Z8K5RI4fN6iUDu1x9N7FaV92O9zMvaaBdHPLU', 'prev_content': {'displayname': 'luna', 'membership': 'invite'}, 'prev_sender': '@evan:localhost', 'membership': 'join', 'age': 39}, 'event_id': '$6xskpedlvGLDqgK59L6fYdtgwEYBV6GMrWhW5-ztLdI'}], 'prev_batch': 's27_96_0_11_20_1_1_17_0_1', 'limited': True}, 'state': {'events': []}, 'account_data': {'events': []}, 'ephemeral': {'events': []}, 'unread_notifications': {'notification_count': 0, 'highlight_count': 0}, 'summary': {}}}}}
2025-01-05 01:17:17,860 [INFO] nio.client.base_client: New joined room !roKWYbjbZOVUoYPFtD:localhost
2025-01-05 01:17:17,861 [INFO] nio.rooms: Room !roKWYbjbZOVUoYPFtD:localhost handling event of type RoomCreateEvent
2025-01-05 01:17:17,861 [INFO] nio.rooms: Room !roKWYbjbZOVUoYPFtD:localhost handling event of type PowerLevelsEvent
2025-01-05 01:17:17,861 [INFO] nio.rooms: Changing power level for user @evan:localhost from 0 to 100
2025-01-05 01:17:17,861 [INFO] nio.rooms: Room !roKWYbjbZOVUoYPFtD:localhost handling event of type RoomJoinRulesEvent
2025-01-05 01:17:17,861 [INFO] nio.rooms: Room !roKWYbjbZOVUoYPFtD:localhost handling event of type RoomHistoryVisibilityEvent
2025-01-05 01:17:17,861 [INFO] nio.rooms: Room !roKWYbjbZOVUoYPFtD:localhost handling event of type RoomGuestAccessEvent
2025-01-05 01:17:17,861 [INFO] nio.rooms: Room !roKWYbjbZOVUoYPFtD:localhost handling event of type RoomEncryptionEvent
2025-01-05 01:17:17,862 [INFO] nio.rooms: Room !roKWYbjbZOVUoYPFtD:localhost handling event of type RoomNameEvent
2025-01-05 01:17:18,355 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's28_96_0_12_21_1_1_17_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'join': {'!roKWYbjbZOVUoYPFtD:localhost': {'timeline': {'events': [], 'prev_batch': 's28_96_0_11_20_1_1_17_0_1', 'limited': False}, 'state': {'events': []}, 'account_data': {'events': []}, 'ephemeral': {'events': [{'type': 'm.receipt', 'content': {'$6xskpedlvGLDqgK59L6fYdtgwEYBV6GMrWhW5-ztLdI': {'m.read': {'@evan:localhost': {'ts': 1736057838324, 'thread_id': 'main'}}}}}]}, 'unread_notifications': {'notification_count': 0, 'highlight_count': 0}, 'summary': {}}}}}
2025-01-05 01:17:23,079 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's28_96_1_12_21_1_1_17_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'join': {'!roKWYbjbZOVUoYPFtD:localhost': {'timeline': {'events': [], 'prev_batch': 's28_96_0_12_21_1_1_17_0_1', 'limited': False}, 'state': {'events': []}, 'account_data': {'events': []}, 'ephemeral': {'events': [{'type': 'm.typing', 'content': {'user_ids': ['@evan:localhost']}}]}, 'unread_notifications': {'notification_count': 0, 'highlight_count': 0}, 'summary': {}}}}}
2025-01-05 01:17:23,964 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's28_96_2_12_21_1_1_17_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'join': {'!roKWYbjbZOVUoYPFtD:localhost': {'timeline': {'events': [], 'prev_batch': 's28_96_1_12_21_1_1_17_0_1', 'limited': False}, 'state': {'events': []}, 'account_data': {'events': []}, 'ephemeral': {'events': [{'type': 'm.typing', 'content': {'user_ids': []}}]}, 'unread_notifications': {'notification_count': 0, 'highlight_count': 0}, 'summary': {}}}}}
2025-01-05 01:17:24,019 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's29_96_2_12_21_1_1_17_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': [], 'rooms': {'join': {'!roKWYbjbZOVUoYPFtD:localhost': {'timeline': {'events': [{'type': 'm.room.encrypted', 'sender': '@evan:localhost', 'content': {'algorithm': 'm.megolm.v1.aes-sha2', 'ciphertext': 'AwgAEpABxGvswh7xkRefT0u7PWqpyxughJgoJhsMP0gkkDNr+BTYv3cAntkhClwsWw8Of3N0Oe/wl3BYWkQTnMrO9ih66kxskUvBiACvIEuGelFAq6eGubPXsJEVo21RWnndsXJf1aZhVvWis8KMvsyg2DGicU2sXOcmJLhmRwIUW9gGqtSRqPfWe1f8XgHTVALLA7d0CBhlFBanNGW+Ho841pkZzpebOUlkQvYOOcBUi48bVLLC18237NK6BdflrfpbGxSvtyvmMLURATznj4MySsgyQblXnQcr0NwI', 'device_id': 'PULWHBXRQX', 'sender_key': 'Q9bL7OEfgVaLYj4UTR4aKA4ts7ECPDfd+XtrmMZ3aDg', 'session_id': 'dYpc59bb0+AusgLd9Kqz48Fit5hcjsWLZ831JrXJMGg'}, 'origin_server_ts': 1736057843994, 'unsigned': {'membership': 'join', 'age': 24}, 'event_id': '$ZU2Hc9VEGiqg3wBYFpiPxL2yoVDIzF4PBdSafx2kft8'}], 'prev_batch': 's28_96_2_12_21_1_1_17_0_1', 'limited': False}, 'state': {'events': []}, 'account_data': {'events': []}, 'ephemeral': {'events': []}, 'unread_notifications': {'notification_count': 1, 'highlight_count': 0}, 'summary': {}}}}}
2025-01-05 01:17:24,020 [INFO] nio.rooms: Room !roKWYbjbZOVUoYPFtD:localhost handling event of type MegolmEvent
2025-01-05 01:17:54,034 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's29_96_2_12_22_1_1_17_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:18:24,070 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's29_96_2_12_22_1_1_17_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:18:24,074 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's29_98_2_12_22_1_1_17_0_1', 'presence': {'events': [{'type': 'm.presence', 'sender': '@evan:localhost', 'content': {'presence': 'online', 'last_active_ago': 29733, 'currently_active': True}}, {'type': 'm.presence', 'sender': '@luna:localhost', 'content': {'presence': 'online', 'last_active_ago': 1, 'currently_active': True}}]}, 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:18:54,082 [DEBUG] nio.responses: Validating response schema {'type': 'object', 'properties': {'device_one_time_keys_count': {'type': 'object', 'default': {}, 'properties': {'curve25519': {'type': 'integer'}, 'signed_curve25519': {'type': 'integer'}}}, 'device_lists': {'type': 'object', 'default': {}, 'properties': {'changed': {'type': 'array', 'items': {'type': 'string'}}, 'left': {'type': 'array', 'items': {'type': 'string'}}}}, 'next_batch': {'type': 'string'}, 'rooms': {'type': 'object', 'default': {'invite': {}, 'join': {}, 'leave': {}}, 'properties': {'invite': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'invite_state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'join': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'properties': {'events': {'type': 'array'}, 'limited': {'type': 'boolean'}, 'prev_batch': {'type': 'string'}}, 'required': ['events']}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'ephemeral': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'summary': {'type': 'object', 'properties': {'m.invited_member_count': {'type': 'integer'}, 'm.joined_member_count': {'type': 'integer'}, 'm.heroes': {'type': 'array', 'items': {'type': 'string'}}}}, 'account_data': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}, 'leave': {'type': 'object', 'default': {}, 'patternProperties': {'^!.+:.+$': {'type': 'object', 'properties': {'timeline': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'state': {'type': 'object', 'default': {}, 'properties': {'events': {'type': 'array', 'default': []}}}}}}}}}, 'to_device': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}, 'presence': {'type': 'object', 'default': {'events': []}, 'properties': {'events': {'type': 'array', 'default': []}}}}, 'required': ['next_batch']}: {'next_batch': 's29_98_2_12_22_1_1_17_0_1', 'device_one_time_keys_count': {'signed_curve25519': 0}, 'org.matrix.msc2732.device_unused_fallback_key_types': [], 'device_unused_fallback_key_types': []}
2025-01-05 01:18:56,212 [WARNING] __main__: KeyboardInterrupt received. Shutting down Director.
2025-01-05 01:18:56,212 [DEBUG] __main__: Preparing to close the event loop.
2025-01-05 01:18:56,212 [INFO] __main__: Event loop closed. Exiting main function.
